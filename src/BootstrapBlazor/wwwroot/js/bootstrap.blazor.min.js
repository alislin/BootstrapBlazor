(function(n,t){typeof define=="function"&&(define.amd||define.cmd)?define(function(){return t(n)}):typeof exports=="object"?module.exports=t(n):n.Browser=t(n)})(typeof self!="undefined"?self:this,function(n){var r=n||{},t=typeof n.navigator!="undefined"?n.navigator:{},i=function(n,i){var r=t.mimeTypes;for(var u in r)if(r[u][n]==i)return!0;return!1};return function(n){var u=n||t.userAgent||{},f=this,e={Trident:u.indexOf("Trident")>-1||u.indexOf("NET CLR")>-1,Presto:u.indexOf("Presto")>-1,WebKit:u.indexOf("AppleWebKit")>-1,Gecko:u.indexOf("Gecko/")>-1,KHTML:u.indexOf("KHTML/")>-1,Safari:u.indexOf("Safari")>-1,Chrome:u.indexOf("Chrome")>-1||u.indexOf("CriOS")>-1,IE:u.indexOf("MSIE")>-1||u.indexOf("Trident")>-1,Edge:u.indexOf("Edge")>-1||u.indexOf("Edg/")>-1,Firefox:u.indexOf("Firefox")>-1||u.indexOf("FxiOS")>-1,"Firefox Focus":u.indexOf("Focus")>-1,Chromium:u.indexOf("Chromium")>-1,Opera:u.indexOf("Opera")>-1||u.indexOf("OPR")>-1,Vivaldi:u.indexOf("Vivaldi")>-1,Yandex:u.indexOf("YaBrowser")>-1,Arora:u.indexOf("Arora")>-1,Lunascape:u.indexOf("Lunascape")>-1,QupZilla:u.indexOf("QupZilla")>-1,"Coc Coc":u.indexOf("coc_coc_browser")>-1,Kindle:u.indexOf("Kindle")>-1||u.indexOf("Silk/")>-1,Iceweasel:u.indexOf("Iceweasel")>-1,Konqueror:u.indexOf("Konqueror")>-1,Iceape:u.indexOf("Iceape")>-1,SeaMonkey:u.indexOf("SeaMonkey")>-1,Epiphany:u.indexOf("Epiphany")>-1,"360":u.indexOf("QihooBrowser")>-1||u.indexOf("QHBrowser")>-1,"360EE":u.indexOf("360EE")>-1,"360SE":u.indexOf("360SE")>-1,UC:u.indexOf("UCBrowser")>-1||u.indexOf(" UBrowser")>-1||u.indexOf("UCWEB")>-1,QQBrowser:u.indexOf("QQBrowser")>-1,QQ:u.indexOf("QQ/")>-1,Baidu:u.indexOf("Baidu")>-1||u.indexOf("BIDUBrowser")>-1||u.indexOf("baidubrowser")>-1||u.indexOf("baiduboxapp")>-1||u.indexOf("BaiduHD")>-1,Maxthon:u.indexOf("Maxthon")>-1,Sogou:u.indexOf("MetaSr")>-1||u.indexOf("Sogou")>-1,Liebao:u.indexOf("LBBROWSER")>-1||u.indexOf("LieBaoFast")>-1,"2345Explorer":u.indexOf("2345Explorer")>-1||u.indexOf("Mb2345Browser")>-1||u.indexOf("2345chrome")>-1,"115Browser":u.indexOf("115Browser")>-1,TheWorld:u.indexOf("TheWorld")>-1,XiaoMi:u.indexOf("MiuiBrowser")>-1,Quark:u.indexOf("Quark")>-1,Qiyu:u.indexOf("Qiyu")>-1,Wechat:u.indexOf("MicroMessenger")>-1,WechatWork:u.indexOf("wxwork/")>-1,Taobao:u.indexOf("AliApp(TB")>-1,Alipay:u.indexOf("AliApp(AP")>-1,Weibo:u.indexOf("Weibo")>-1,Douban:u.indexOf("com.douban.frodo")>-1,Suning:u.indexOf("SNEBUY-APP")>-1,iQiYi:u.indexOf("IqiyiApp")>-1,DingTalk:u.indexOf("DingTalk")>-1,Huawei:u.indexOf("HuaweiBrowser")>-1||u.indexOf("HUAWEI/")>-1||u.indexOf("HONOR")>-1,Vivo:u.indexOf("VivoBrowser")>-1,Windows:u.indexOf("Windows")>-1,Linux:u.indexOf("Linux")>-1||u.indexOf("X11")>-1,"Mac OS":u.indexOf("Macintosh")>-1,Android:u.indexOf("Android")>-1||u.indexOf("Adr")>-1,HarmonyOS:u.indexOf("HarmonyOS")>-1,Ubuntu:u.indexOf("Ubuntu")>-1,FreeBSD:u.indexOf("FreeBSD")>-1,Debian:u.indexOf("Debian")>-1,"Windows Phone":u.indexOf("IEMobile")>-1||u.indexOf("Windows Phone")>-1,BlackBerry:u.indexOf("BlackBerry")>-1||u.indexOf("RIM")>-1,MeeGo:u.indexOf("MeeGo")>-1,Symbian:u.indexOf("Symbian")>-1,iOS:u.indexOf("like Mac OS X")>-1,"Chrome OS":u.indexOf("CrOS")>-1,WebOS:u.indexOf("hpwOS")>-1,Mobile:u.indexOf("Mobi")>-1||u.indexOf("iPh")>-1||u.indexOf("480")>-1,Tablet:u.indexOf("Tablet")>-1||u.indexOf("Pad")>-1||u.indexOf("Nexus 7")>-1},o=!1,s,h,c,l,v,y,a;r.chrome&&(s=u.replace(/^.*Chrome\/([\d]+).*$/,"$1"),r.chrome.adblock2345||r.chrome.common2345?e["2345Explorer"]=!0:i("type","application/360softmgrplugin")||i("type","application/mozilla-npqihooquicklogin")?o=!0:s>36&&r.showModalDialog?o=!0:s>45&&(o=i("type","application/vnd.chromium.remoting-viewer"),!o&&s>=69&&(o=i("type","application/hwepass2001.installepass2001")||i("type","application/asx"))));e.Mobile?e.Mobile=!(u.indexOf("iPad")>-1):o&&(i("type","application/gameplugin")?e["360SE"]=!0:t&&typeof t.connection!="undefined"&&typeof t.connection.saveData=="undefined"?e["360SE"]=!0:e["360EE"]=!0);e.Baidu&&e.Opera?e.Baidu=!1:e.iOS&&(e.Safari=!0);h={engine:["WebKit","Trident","Gecko","Presto","KHTML"],browser:["Safari","Chrome","Edge","IE","Firefox","Firefox Focus","Chromium","Opera","Vivaldi","Yandex","Arora","Lunascape","QupZilla","Coc Coc","Kindle","Iceweasel","Konqueror","Iceape","SeaMonkey","Epiphany","XiaoMi","Vivo","360","360SE","360EE","UC","QQBrowser","QQ","Huawei","Baidu","Maxthon","Sogou","Liebao","2345Explorer","115Browser","TheWorld","Quark","Qiyu","Wechat","WechatWork","Taobao","Alipay","Weibo","Douban","Suning","iQiYi","DingTalk"],os:["Windows","Linux","Mac OS","Android","HarmonyOS","Ubuntu","FreeBSD","Debian","iOS","Windows Phone","BlackBerry","MeeGo","Symbian","Chrome OS","WebOS"],device:["Mobile","Tablet"]};f.device="PC";f.language=function(){var i=t.browserLanguage||t.language,n=i.split("-");return n[1]&&(n[1]=n[1].toUpperCase()),n.join("_")}();for(c in h)for(l=0;l<h[c].length;l++)v=h[c][l],e[v]&&(f[c]=v);y={Windows:function(){var n=u.replace(/^Mozilla\/\d.0 \(Windows NT ([\d.]+)[;)].*$/,"$1");return{"10":"10","6.4":"10","6.3":"8.1","6.2":"8","6.1":"7","6.0":"Vista","5.2":"XP","5.1":"XP","5.0":"2000"}[n]||n},Android:function(){return u.replace(/^.*Android ([\d.]+);.*$/,"$1")},HarmonyOS:function(){var n=u.replace(/^Mozilla.*Android ([\d.]+)[;)].*$/,"$1");return{"10":"2"}[n]||""},iOS:function(){return u.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".")},Debian:function(){return u.replace(/^.*Debian\/([\d.]+).*$/,"$1")},"Windows Phone":function(){return u.replace(/^.*Windows Phone( OS)? ([\d.]+);.*$/,"$2")},"Mac OS":function(){return u.replace(/^.*Mac OS X ([\d_]+).*$/,"$1").replace(/_/g,".")},WebOS:function(){return u.replace(/^.*hpwOS\/([\d.]+);.*$/,"$1")}};f.osVersion="";y[f.os]&&(f.osVersion=y[f.os](),f.osVersion==u&&(f.osVersion=""));a={Safari:function(){return u.replace(/^.*Version\/([\d.]+).*$/,"$1")},Chrome:function(){return u.replace(/^.*Chrome\/([\d.]+).*$/,"$1").replace(/^.*CriOS\/([\d.]+).*$/,"$1")},IE:function(){return u.replace(/^.*MSIE ([\d.]+).*$/,"$1").replace(/^.*rv:([\d.]+).*$/,"$1")},Edge:function(){return u.replace(/^.*Edge\/([\d.]+).*$/,"$1").replace(/^.*Edg\/([\d.]+).*$/,"$1")},Firefox:function(){return u.replace(/^.*Firefox\/([\d.]+).*$/,"$1").replace(/^.*FxiOS\/([\d.]+).*$/,"$1")},"Firefox Focus":function(){return u.replace(/^.*Focus\/([\d.]+).*$/,"$1")},Chromium:function(){return u.replace(/^.*Chromium\/([\d.]+).*$/,"$1")},Opera:function(){return u.replace(/^.*Opera\/([\d.]+).*$/,"$1").replace(/^.*OPR\/([\d.]+).*$/,"$1")},Vivaldi:function(){return u.replace(/^.*Vivaldi\/([\d.]+).*$/,"$1")},Yandex:function(){return u.replace(/^.*YaBrowser\/([\d.]+).*$/,"$1")},Arora:function(){return u.replace(/^.*Arora\/([\d.]+).*$/,"$1")},Lunascape:function(){return u.replace(/^.*Lunascape[\/\s]([\d.]+).*$/,"$1")},QupZilla:function(){return u.replace(/^.*QupZilla[\/\s]([\d.]+).*$/,"$1")},"Coc Coc":function(){return u.replace(/^.*coc_coc_browser\/([\d.]+).*$/,"$1")},Kindle:function(){return u.replace(/^.*Version\/([\d.]+).*$/,"$1")},Iceweasel:function(){return u.replace(/^.*Iceweasel\/([\d.]+).*$/,"$1")},Konqueror:function(){return u.replace(/^.*Konqueror\/([\d.]+).*$/,"$1")},Iceape:function(){return u.replace(/^.*Iceape\/([\d.]+).*$/,"$1")},SeaMonkey:function(){return u.replace(/^.*SeaMonkey\/([\d.]+).*$/,"$1")},Epiphany:function(){return u.replace(/^.*Epiphany\/([\d.]+).*$/,"$1")},"360":function(){return u.replace(/^.*QihooBrowser\/([\d.]+).*$/,"$1")},"360SE":function(){var n=u.replace(/^.*Chrome\/([\d]+).*$/,"$1");return{"86":"13.0","78":"12.0","69":"11.0","63":"10.0","55":"9.1","45":"8.1","42":"8.0","31":"7.0","21":"6.3"}[n]||""},"360EE":function(){var n=u.replace(/^.*Chrome\/([\d]+).*$/,"$1");return{"86":"13.0","78":"12.0","69":"11.0","63":"9.5","55":"9.0","50":"8.7","30":"7.5"}[n]||""},Maxthon:function(){return u.replace(/^.*Maxthon\/([\d.]+).*$/,"$1")},QQBrowser:function(){return u.replace(/^.*QQBrowser\/([\d.]+).*$/,"$1")},QQ:function(){return u.replace(/^.*QQ\/([\d.]+).*$/,"$1")},Baidu:function(){return u.replace(/^.*BIDUBrowser[\s\/]([\d.]+).*$/,"$1").replace(/^.*baiduboxapp\/([\d.]+).*$/,"$1")},UC:function(){return u.replace(/^.*UC?Browser\/([\d.]+).*$/,"$1")},Sogou:function(){return u.replace(/^.*SE ([\d.X]+).*$/,"$1").replace(/^.*SogouMobileBrowser\/([\d.]+).*$/,"$1")},Liebao:function(){var n="",t,i;return u.indexOf("LieBaoFast")>-1&&(n=u.replace(/^.*LieBaoFast\/([\d.]+).*$/,"$1")),t={"57":"6.5","49":"6.0","46":"5.9","42":"5.3","39":"5.2","34":"5.0","29":"4.5","21":"4.0"},i=u.replace(/^.*Chrome\/([\d]+).*$/,"$1"),n||t[i]||""},"2345Explorer":function(){var n=navigator.userAgent.replace(/^.*Chrome\/([\d]+).*$/,"$1");return{"69":"10.0","55":"9.9"}[n]||u.replace(/^.*2345Explorer\/([\d.]+).*$/,"$1").replace(/^.*Mb2345Browser\/([\d.]+).*$/,"$1")},"115Browser":function(){return u.replace(/^.*115Browser\/([\d.]+).*$/,"$1")},TheWorld:function(){return u.replace(/^.*TheWorld ([\d.]+).*$/,"$1")},XiaoMi:function(){return u.replace(/^.*MiuiBrowser\/([\d.]+).*$/,"$1")},Vivo:function(){return u.replace(/^.*VivoBrowser\/([\d.]+).*$/,"$1")},Quark:function(){return u.replace(/^.*Quark\/([\d.]+).*$/,"$1")},Qiyu:function(){return u.replace(/^.*Qiyu\/([\d.]+).*$/,"$1")},Wechat:function(){return u.replace(/^.*MicroMessenger\/([\d.]+).*$/,"$1")},WechatWork:function(){return u.replace(/^.*wxwork\/([\d.]+).*$/,"$1")},Taobao:function(){return u.replace(/^.*AliApp\(TB\/([\d.]+).*$/,"$1")},Alipay:function(){return u.replace(/^.*AliApp\(AP\/([\d.]+).*$/,"$1")},Weibo:function(){return u.replace(/^.*weibo__([\d.]+).*$/,"$1")},Douban:function(){return u.replace(/^.*com.douban.frodo\/([\d.]+).*$/,"$1")},Suning:function(){return u.replace(/^.*SNEBUY-APP([\d.]+).*$/,"$1")},iQiYi:function(){return u.replace(/^.*IqiyiVersion\/([\d.]+).*$/,"$1")},DingTalk:function(){return u.replace(/^.*DingTalk\/([\d.]+).*$/,"$1")},Huawei:function(){return u.replace(/^.*Version\/([\d.]+).*$/,"$1").replace(/^.*HuaweiBrowser\/([\d.]+).*$/,"$1")}};f.version="";a[f.browser]&&(f.version=a[f.browser](),f.version==u&&(f.version=""));f.browser=="Chrome"&&u.match(/\S+Browser/)&&(f.browser=u.match(/\S+Browser/)[0],f.version=u.replace(/^.*Browser\/([\d.]+).*$/,"$1"));f.browser=="Firefox"&&(window.clientInformation||!window.u2f)&&(f.browser+=" Nightly");f.browser=="Edge"?f.engine=f.version>"75"?"Blink":"EdgeHTML":e.Chrome&&f.engine=="WebKit"&&parseInt(a.Chrome())>27?f.engine="Blink":f.browser=="Opera"&&parseInt(f.version)>12?f.engine="Blink":f.browser=="Yandex"&&(f.engine="Blink")}}),function(n){function r(t){return this.each(function(){var u=n(this),r=u.data(i.DATA_KEY),f=typeof t=="object"&&t;r?r.update(f):u.data(i.DATA_KEY,r=new i(this,f))})}var i=function(t,i){this.$element=n(t);this.options=n.extend({},i);this.init()},t;i.VERSION="5.1.0";i.Author="argo@163.com";i.DATA_KEY="lgb.SliderCaptcha";t=i.prototype;t.init=function(){this.initDOM();this.initImg();this.bindEvents()};t.initDOM=function(){var u=this.$element.find("canvas:first")[0].getContext("2d"),t=this.$element.find("canvas:last")[0],f=t.getContext("2d"),e=this.$element.find(".captcha-load"),i=this.$element.find(".captcha-footer"),o=i.find(".captcha-bar-bg"),s=this.$element.find(".captcha-bar"),r=this.$element.find(".captcha-bar-text"),h=this.$element.find(".captcha-refresh"),c=r.attr("data-text");n.extend(this,{canvas:u,block:t,bar:f,$load:e,$footer:i,$barLeft:o,$slider:s,$barText:r,$refresh:h,barText:c})};t.initImg=function(){var i=function(n,t){var i=this.options.sideLength,f=this.options.diameter,e=Math.PI,r=this.options.offsetX,u=this.options.offsetY;n.beginPath();n.moveTo(r,u);n.arc(r+i/2,u-f+2,f,.72*e,2.26*e);n.lineTo(r+i,u);n.arc(r+i+f-2,u+i/2,f,1.21*e,2.78*e);n.lineTo(r+i,u+i);n.lineTo(r,u+i);n.arc(r+f-2,u+i/2,f+.4,2.76*e,1.24*e,!0);n.lineTo(r,u);n.lineWidth=2;n.fillStyle="rgba(255, 255, 255, 0.7)";n.strokeStyle="rgba(255, 255, 255, 0.7)";n.stroke();n[t]();n.globalCompositeOperation="destination-over"},t=new Image,n;t.src=this.options.imageUrl;n=this;t.onload=function(){i.call(n,n.canvas,"fill");i.call(n,n.bar,"clip");n.canvas.drawImage(t,0,0,n.options.width,n.options.height);n.bar.drawImage(t,0,0,n.options.width,n.options.height);var r=n.options.offsetY-n.options.diameter*2-1,u=n.bar.getImageData(n.options.offsetX-3,r,n.options.barWidth,n.options.barWidth);n.block.width=n.options.barWidth;n.bar.putImageData(u,0,r)};t.onerror=function(){n.$load.text($load.attr("data-failed")).addClass("text-danger")}};t.bindEvents=function(){var n=this,t=0,i=0,r=[];this.$slider.drag(function(r){n.$barText.addClass("d-none");t=r.clientX||r.touches[0].clientX;i=r.clientY||r.touches[0].clientY},function(u){var o=u.clientX||u.touches[0].clientX,s=u.clientY||u.touches[0].clientY,f=o-t,h=s-i,e;if(f<0||f+40>n.options.width)return!1;n.$slider.css({left:f-1+"px"});e=(n.options.width-60)/(n.options.width-40)*f;n.block.style.left=e+"px";n.$footer.addClass("is-move");n.$barLeft.css({width:f+4+"px"});r.push(Math.round(h))},function(i){var f=i.clientX||i.changedTouches[0].clientX,u;n.$footer.removeClass("is-move");u=Math.ceil((n.options.width-60)/(n.options.width-40)*(f-t)+3);n.verify(u,r)});this.$refresh.on("click",function(){n.options.barText=n.$barText.attr("data-text")})};t.verify=function(n,t){var r=this.options.remoteObj.obj,u=this.options.remoteObj.method,i=this;r.invokeMethodAsync(u,n,t).then(function(n){n?(i.$footer.addClass("is-valid"),i.options.barText=i.$barText.attr("data-text")):(i.$footer.addClass("is-invalid"),setTimeout(function(){i.$refresh.trigger("click");i.options.barText=i.$barText.attr("data-try")},1e3))})};t.update=function(t){n.extend(this.options,t);this.resetCanvas();this.initImg();this.resetBar()};t.resetCanvas=function(){this.canvas.clearRect(0,0,this.options.width,this.options.height);this.bar.clearRect(0,0,this.options.width,this.options.height);this.block.width=this.options.width;this.block.style.left=0;this.$load.text(this.$load.attr("data-load")).removeClass("text-danger")};t.resetBar=function(){this.$footer.removeClass("is-invalid is-valid");this.$barText.text(this.options.barText).removeClass("d-none");this.$slider.css({left:"0px"});this.$barLeft.css({width:"0px"})};n.fn.sliderCaptcha=r;n.fn.sliderCaptcha.Constructor=i;n.extend({captcha:function(t,i,r,u){u.remoteObj={obj:i,method:r};n(t).sliderCaptcha(u)}})}(jQuery),function(n){n.isFunction(Date.prototype.format)||(Date.prototype.format=function(n){var i={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()},t;/(y+)/.test(n)&&(n=n.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length)));/(E+)/.test(n)&&(n=n.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"星期":"周":"")+{0:"日",1:"一",2:"二",3:"三",4:"四",5:"五",6:"六"}[this.getDay()]));for(t in i)new RegExp("("+t+")").test(n)&&(n=n.replace(RegExp.$1,RegExp.$1.length===1?i[t]:("00"+i[t]).substr((""+i[t]).length)));return n});n.browser={versions:function(){var n=navigator.userAgent;return{trident:n.indexOf("Trident")>-1,presto:n.indexOf("Presto")>-1,webKit:n.indexOf("AppleWebKit")>-1,gecko:n.indexOf("Gecko")>-1&&n.indexOf("KHTML")===-1,mobile:!!n.match(/AppleWebKit.*Mobile.*/),ios:!!n.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),android:n.indexOf("Android")>-1||n.indexOf("Linux")>-1,iPhone:n.indexOf("iPhone")>-1,iPod:n.indexOf("iPod")>-1,iPad:n.indexOf("iPad")>-1,mac:n.indexOf("Macintosh")>-1,webApp:n.indexOf("Safari")===-1}}(),language:(navigator.browserLanguage||navigator.language).toLowerCase()};Array.prototype.indexOf=function(n){for(var t=0;t<this.length;t++)if(this[t]==n)return t;return-1};Array.prototype.remove=function(n){var t=this.indexOf(n);t>-1&&this.splice(t,1)};n.extend({format:function(t,i){return i===undefined||i===null?null:(arguments.length>2&&i.constructor!==Array&&(i=n.makeArray(arguments).slice(1)),i.constructor!==Array&&(i=[i]),n.each(i,function(n,i){t=t.replace(new RegExp("\\{"+n+"\\}","g"),function(){return i})}),t)},getUID:function(n){n||(n="b");do n+=~~(Math.random()*1e6);while(document.getElementById(n));return n},webClient:function(t,i,r){var u={},f=new Browser;u.Browser=f.browser+" "+f.version;u.Os=f.os+" "+f.osVersion;u.Device=f.device;u.Language=f.language;u.Engine=f.engine;u.UserAgent=navigator.userAgent;n.ajax({type:"GET",url:i,success:function(n){t.invokeMethodAsync(r,n.Id,n.Ip,u.Os,u.Browser,u.Device,u.Language,u.Engine,u.UserAgent)},error:function(){console.error("Please add UseBootstrapBlazor middleware");t.invokeMethodAsync(r,"","",u.Os,u.Browser,u.Device,u.Language,u.Engine,u.UserAgent)}})}});n.fn.extend({drag:function(t,i,r){var u=n(this),o=function(i){i.stopPropagation();document.addEventListener("mousemove",f);document.addEventListener("touchmove",f);document.addEventListener("mouseup",e);document.addEventListener("touchend",e);n.isFunction(t)&&t.call(u,i)},f=function(t){n.isFunction(i)&&i.call(u,t)},e=function(t){n.isFunction(r)&&r.call(u,t);window.setTimeout(function(){document.removeEventListener("mousemove",f);document.removeEventListener("touchmove",f);document.removeEventListener("mouseup",e);document.removeEventListener("touchend",e)},100)};u.on("mousedown",o);u.on("touchstart",o)}})}(jQuery),function(n){function i(i){return this.each(function(){var r=n(this),u=r.data(t.DATA_KEY),f=typeof i=="object"&&i;u||r.data(t.DATA_KEY,u=new t(this,f))})}var t=function(t,i){this.$element=n(t);var u=this._getColSpan(this.$element),f=this.$element.data("type"),r=parseInt(this.$element.data("items"));isNaN(r)&&(r=12);this.options=n.extend({rowType:f,itemsPerRow:r,colSpan:u},i);this.layout()};t.VERSION="5.1.0";t.Author="argo@163.com";t.DATA_KEY="lgb.grid";n.extend(t.prototype,{layout:function(){this._layout_column(null);this.$element.removeClass("d-none")},_layout_column:function(t){var e=this.$element,o=this.options.rowType,s=this.options.itemsPerRow,f=!1,i=null,r=this,u=n('<div class="row g-3"><\/div>');o==="inline"&&u.addClass("form-inline");e.children().each(function(e,o){var s=n(o),c=s.data("toggle")==="row",h=r._getColSpan(s);c?n("<div><\/div>").addClass(r._calc(h)).appendTo(u).append(s):(f=s.prop("tagName")==="LABEL",f?(i===null&&(i=n("<div><\/div>").addClass(r._calc(h))),i.append(s)):(f=!1,i==null&&(i=n("<div><\/div>").addClass(r._calc(h))),i.append(s),t==null?i.appendTo(u):i.appendTo(t),i=null))});t==null&&e.append(u)},_layout_parent_row:function(){var t=this.$element.data("target"),i=n('[data-uid="'+t+'"]'),r=n('<div class="row"><\/div>').appendTo(i);this._layout_column(r)},_calc:function(n){var t=this.options.itemsPerRow,i;return n>0&&(t=t*n),i="col-12",t!==12&&(i="col-12 col-sm-"+t),i},_getColSpan:function(n){var t=parseInt(n.data("colspan"));return isNaN(t)&&(t=0),t}});n.fn.grid=i;n.fn.grid.Constructor=t}(jQuery),function(n){function r(i){return this.each(function(){var u=n(this),r=u.data(t.DATA_KEY),f=typeof i=="object"&&i;r||u.data(t.DATA_KEY,r=new t(this,f));typeof i=="string"&&/active/.test(i)&&r[i].apply(r)})}var t=function(t,i){this.$element=n(t);this.$header=this.$element.find(".tabs-header");this.$wrap=this.$header.find(".tabs-nav-wrap");this.$scroll=this.$wrap.find(".tabs-nav-scroll");this.$tab=this.$scroll.find(".tabs-nav");this.options=n.extend({},i);this.init()},i;t.VERSION="5.1.0";t.Author="argo@163.com";t.DATA_KEY="lgb.Tab";i=t.prototype;i.init=function(){var t=this;n(window).on("resize",function(){t.resize()});this.active()};i.fixSize=function(){var n=this.$element.height(),t=this.$element.width();this.$element.css({height:n+"px",width:t+"px"})};i.resize=function(){var n,t,i,r,u;this.vertical=this.$element.hasClass("tabs-left")||this.$element.hasClass("tabs-right");this.horizontal=this.$element.hasClass("tabs-top")||this.$element.hasClass("tabs-bottom");n=this.$tab.find(".tabs-item:last");n.length>0&&(this.vertical?(this.$wrap.css({height:this.$element.height()+"px"}),t=this.$tab.height(),i=n.position().top+n.outerHeight(),i<t?this.$wrap.removeClass("is-scrollable"):this.$wrap.addClass("is-scrollable")):(this.$wrap.removeAttr("style"),r=this.$tab.width(),u=n.position().left+n.outerWidth(),u<r?this.$wrap.removeClass("is-scrollable"):this.$wrap.addClass("is-scrollable")))};i.active=function(){var r,n,f,o,c,l;if(this.resize(),r=this.$element.find(".tabs-active-bar"),n=this.$element.find(".tabs-item.active"),n.length!==0)if(this.vertical){var u=n.position().top,a=u+n.outerHeight(),t=this.$scroll.scrollTop(),v=this.$scroll.outerHeight(),s=a-t-v;s>0?this.$scroll.scrollTop(t+s):(f=u-t,f<0&&this.$scroll.scrollTop(t+f));r.css({width:"2px",transform:"translateY("+u+"px)"})}else{var e=n.position().left,y=e+n.outerWidth(),i=this.$scroll.scrollLeft(),p=this.$scroll.width(),h=y-i-p;h>0?this.$scroll.scrollLeft(i+h):(o=e-i,o<0&&this.$scroll.scrollLeft(i+o));c=n.width();l=e+parseInt(n.css("paddingLeft"));r.css({width:c+"px",transform:"translateX("+l+"px)"})}};n.fn.lgbTab=r;n.fn.lgbTab.Constructor=t}(jQuery),function(n){n.extend({bb_ajax:function(t,i,r){r=JSON.stringify(r);var u=null;return(n.ajax({url:t,data:r,method:i,contentType:"application/json",dataType:"json","async":!1,success:function(n){u=n},error:function(){return null}}),u==null)?null:JSON.stringify(u)},bb_ajax_goto:function(n){window.location.href=n}})}(jQuery),function(n){n.extend({bb_anchor:function(t){var i=n(t);i.on("click",function(t){var f,u,r,e,o;t.preventDefault();f=n(i.data("target"));u=i.data("container");u||(u=window);r=f.offset().top;e=f.css("marginTop").replace("px","");e&&(r=r-parseInt(e));o=i.data("offset");o&&(r=r-parseInt(o));n(u).scrollTop(r)})}})}(jQuery),function(n){n.extend({bb_copyText:function(n){if(navigator.clipboard)navigator.clipboard.writeText(n);else{if(typeof n!="string")return!1;var t=document.createElement("input");t.setAttribute("type","text");t.setAttribute("value",n);document.body.appendChild(t);t.select();document.execCommand("copy");document.body.removeChild(t)}}});n(function(){n(document).on("click",".anchor-link",function(){var t=n(this),i=t.attr("id"),r,u,f;i&&(r=t.attr("data-title"),u=window.location.origin+window.location.pathname+"#"+i,n.bb_copyText(u),t.tooltip({title:r}),t.tooltip("show"),f=window.setTimeout(function(){window.clearTimeout(f);t.tooltip("dispose")},1e3))})})}(jQuery),function(n){n.extend({bb_autoScrollItem:function(t,i){var s=n(t),r=s.find(".dropdown-list"),e=parseInt(r.css("max-height").replace("px",""))/2,u=r.children("li:first").outerHeight(),h=u*i,f=Math.floor(e/u),o;r.children().removeClass("active");o=r.children().length;i<o&&r.children()[i].classList.add("active");h>e?r.scrollTop(u*(i>f?i-f:i)):i<=f&&r.scrollTop(0)},bb_setDebounce:function(t,i){var f=n(t),u;let r;u=["ArrowUp","ArrowDown","Escape","Enter"];f.on("keyup",function(n){u.indexOf(n.key)<1&&r?(clearTimeout(r),n.stopPropagation(),r=setTimeout(function(){r=null;n.target.dispatchEvent(n.originalEvent)},i)):r=setTimeout(function(){},i)})}})}(jQuery),function(n){n.extend({bb_auto_redirect:function(t,i,r){var u={},f=1,e=window.setInterval(function(){n(document).off("mousemove").one("mousemove",function(n){(u.screenX!==n.screenX||u.screenY!==n.screenY)&&(u.screenX=n.screenX,u.screenY=n.screenY,f=1)});n(document).off("keydown").one("keydown",function(){f=1})},1e3),o=window.setInterval(function(){f++>i&&(window.clearInterval(o),window.clearInterval(e),t.invokeMethodAsync(r))},1e3)}})}(jQuery),function(n){n.extend({bb_vibrate:function(){if("vibrate"in window.navigator){window.navigator.vibrate([200,100,200]);var n=window.setTimeout(function(){window.clearTimeout(n);window.navigator.vibrate([])},1e3)}},bb_barcode:function(t,i,r,u){var f=n(t),e=new ZXing.BrowserMultiFormatReader;if(r==="dispose"){e.reset();return}f.attr("data-scan")==="Camera"&&e.getVideoInputDevices().then(n=>{i.invokeMethodAsync("InitDevices",n).then(()=>{if(u&&n.length>0){var t=f.find('button[data-method="scan"]'),i=f.attr("data-scan");i==="Camera"&&t.trigger("click")}})});f.on("click","button[data-method]",function(){var r=n(this).attr("data-method"),o,s,u,t;if(r==="scan")i.invokeMethodAsync("Start"),o=f.find(".dropdown-item.active").attr("data-val"),s=f.find("video").attr("id"),e.decodeFromVideoDevice(o,s,(t,r)=>{if(t){n.bb_vibrate();console.log(t.text);i.invokeMethodAsync("GetResult",t.text);var u=f.attr("data-autostop")==="true";u&&e.reset()}!r||r instanceof ZXing.NotFoundException||(console.error(r),i.invokeMethodAsync("GetError",r))});else if(r==="scanImage"){e=new ZXing.BrowserMultiFormatReader;f.find(":file").remove();u=n(".scanner-image");t=n('<input type="file" hidden accept="image/*">');f.append(t);t.on("change",function(){if(this.files.length!==0){var t=new FileReader;t.onloadend=function(t){u.attr("src",t.target.result);e.decodeFromImage(u[0]).then(t=>{t&&(n.bb_vibrate(),console.log(t.text),i.invokeMethodAsync("GetResult",t.text))}).catch(n=>{n&&(console.log(n),i.invokeMethodAsync("GetError",n.message))})};t.readAsDataURL(this.files[0])}});t.trigger("click")}else r==="close"&&(e.reset(),i.invokeMethodAsync("Stop"))})}})}(jQuery),function(n){n.extend({bb_camera:function(t,i,r,u,f,e){var o=n(t),h=function(n,t){n.pause();n.srcObject=null;t.stop()},c,s;if(r==="stop"){c=o.find("video")[0];s=o.data("bb_video_track");s&&h(c,s);return}navigator.mediaDevices.enumerateDevices().then(function(t){var l=t.filter(function(n){return n.kind==="videoinput"}),r,s,a,c;i.invokeMethodAsync("InitDevices",l).then(()=>{u&&l.length>0&&o.find('button[data-method="play"]').trigger("click")});r=o.find("video")[0];s=o.find("canvas")[0];s.width=f;s.height=e;a=s.getContext("2d");o.on("click","button[data-method]",async function(){var l=n(this).attr("data-method"),t,v,u;if(l==="play"){var w=n(this).attr("data-camera"),y=o.find(".dropdown-item.active").attr("data-val"),p={video:{facingMode:w,width:f,height:e},audio:!1};y!==""&&(p.video.deviceId={exact:y});navigator.mediaDevices.getUserMedia(p).then(n=>{r.srcObject=n,r.play(),c=n.getTracks()[0],o.data("bb_video_track",c),i.invokeMethodAsync("Start")}).catch(n=>{console.log(n),i.invokeMethodAsync("GetError",n.message)})}else if(l==="stop")h(r,c),i.invokeMethodAsync("Stop");else if(l==="capture"){for(a.drawImage(r,0,0,f,e),t=s.toDataURL(),v=30720;t.length>v;)u=t.substr(0,v),console.log(u),await i.invokeMethodAsync("Capture",u),t=t.substr(u.length);t.length>0&&await i.invokeMethodAsync("Capture",t);await i.invokeMethodAsync("Capture","__BB__%END%__BB__")}})})}})}(jQuery),function(n){n.extend({bb_card_collapse:function(t){var i=n(t);i.on("click",function(){var i=n(this).toggleClass("is-open"),t=i.closest(".card").find(".card-body");t.length===1&&(t.is(":hidden")&&t.parent().toggleClass("collapsed"),t.slideToggle("fade",function(){var t=n(this);t.is(":hidden")&&t.parent().toggleClass("collapsed")}))})}})}(jQuery),function(n){n.extend({bb_carousel:function(t){var r=n(t).carousel(),i=null;r.hover(function(){var t,r,u;i!=null&&window.clearTimeout(i);t=n(this);r=t.find("[data-bs-slide]");r.removeClass("d-none");u=window.setTimeout(function(){window.clearTimeout(u);t.addClass("hover")},10)},function(){var t=n(this),r=t.find("[data-bs-slide]");t.removeClass("hover");i=window.setTimeout(function(){window.clearTimeout(i);r.addClass("d-none")},300)})}})}(jQuery),function(n){n.extend({bb_collapse:function(t){var i=n(t),r=null;i.hasClass("is-accordion")&&(r="["+t.getAttributeNames().pop()+"]");n.each(i.children(".accordion-item"),function(){var u=n(this),i=u.children(".accordion-collapse"),t=i.attr("id"),f;t||(t=n.getUID(),i.attr("id",t),r!=null&&i.attr("data-bs-parent",r),f=u.find('[data-bs-toggle="collapse"]'),f.attr("data-bs-target","#"+t).attr("aria-controls",t))});i.find(".tree .tree-item > .fa").on("click",function(){var t=n(this).parent();t.find('[data-bs-toggle="collapse"]').trigger("click")});if(i.parent().hasClass("menu"))i.on("click",".nav-link:not(.collapse)",function(){var r=n(this),t;for(i.find(".active").removeClass("active"),r.addClass("active"),t=r.closest(".accordion");t.length>0;)t.children(".accordion-header").find(".nav-link").addClass("active"),t=t.parent().closest(".accordion")})}})}(jQuery),function(n){n.extend({bb_console:function(t){var u=n(t),i=u.find('[data-scroll="auto"]'),r;i.length>0&&(r=i.find(".console-window"),i.scrollTop(r.height()))}})}(jQuery),function(n){n.extend({bb_timePicker:function(t){var i=n(t);return i.find(".time-spinner-item").height()},bb_timecell:function(t,i,r,u){var f=n(t);f.find(".time-spinner-list").on("mousewheel wheel",function(n){var t=n.originalEvent.wheelDeltaY||-n.originalEvent.deltaY;return t>0?i.invokeMethodAsync(r):i.invokeMethodAsync(u),!1})}})}(jQuery),function(n){n.extend({bb_form_load:function(t,i){var r=n(t);i==="show"?r.addClass("show"):r.removeClass("show")}})}(jQuery),function(n){n.extend({bb_download_wasm:function(n,t,i){var u=BINDING.conv_string(n),e=BINDING.conv_string(t),o=Blazor.platform.toUint8Array(i),s=new File([o],u,{type:e}),f=URL.createObjectURL(s),r=document.createElement("a");document.body.appendChild(r);r.href=f;r.download=u;r.target="_self";r.click();URL.revokeObjectURL(f)},bb_download:function(t,i,r){var f=n.bb_create_url(t,i,r),u=document.createElement("a");document.body.appendChild(u);u.href=f;u.download=t;u.target="_self";u.click();URL.revokeObjectURL(f)},bb_create_url_wasm:function(n,t,i){var r=BINDING.conv_string(n),u=BINDING.conv_string(t),f=Blazor.platform.toUint8Array(i),e=new File([f],r,{type:u});return URL.createObjectURL(e)},bb_create_url:function(t,i,r){typeof r=="string"&&(r=n.base64DecToArr(r));var u=r,f=new File([u],t,{type:i});return URL.createObjectURL(f)},b64ToUint6:function(n){return n>64&&n<91?n-65:n>96&&n<123?n-71:n>47&&n<58?n+4:n===43?62:n===47?63:0},base64DecToArr:function(t,i){for(var h=t.replace(/[^A-Za-z0-9\+\/]/g,""),u=h.length,c=i?Math.ceil((u*3+1>>2)/i)*i:u*3+1>>2,l=new Uint8Array(c),f,e,o=0,s=0,r=0;r<u;r++)if(e=r&3,o|=n.b64ToUint6(h.charCodeAt(r))<<18-6*e,e===3||u-r==1){for(f=0;f<3&&s<c;f++,s++)l[s]=o>>>(16>>>f&24)&255;o=0}return l}})}(jQuery),function(n){n.extend({bb_drawer:function(t,i){var r=n(t),u;i?(r.addClass("is-open"),n("body").addClass("overflow-hidden")):r.hasClass("is-open")&&(r.removeClass("is-open").addClass("is-close"),u=window.setTimeout(function(){window.clearTimeout(u);r.removeClass("is-close");n("body").removeClass("overflow-hidden")},350))}})}(jQuery),function(n){n.extend({bb_html5edit:function(t,i){if(n.isFunction(n.fn.summernote)){var r=n(t),u=typeof i=="object"&&i;return/destroy|hide/.test(i)?r.toggleClass("open").summernote(i):typeof i=="string"?r.hasClass("open")?r.summernote(i):r.html():(u=n.extend({focus:!0,lang:"zh-CN",height:80,dialogsInBody:!0},u),r.on("click",u,function(t,i){var u=n(this).tooltip("hide"),r=n.extend({placeholder:u.attr("placeholder")},t.data,i||{});r.obj.invokeMethodAsync("GetToolBar").then(t=>{var i=u.toggleClass("open").summernote(n.extend({callbacks:{onChange:function(n){r.obj.invokeMethodAsync(r.method,n)}},toolbar:t},r)).next().find(".note-toolbar").on("click","button[data-method]",{note:u,op:r},function(t){var r=n(this),i,u;switch(r.attr("data-method")){case"submit":r.tooltip("dispose");i=t.data.note.toggleClass("open");u=i.summernote("code");i.summernote("destroy");t.data.op.obj.invokeMethodAsync(t.data.op.method,u)}}),f=n('<div class="note-btn-group btn-group note-view note-right"><button type="button" class="note-btn btn btn-sm note-btn-close" tabindex="-1" data-method="submit" title="完成" data-bs-placement="bottom"><i class="fa fa-check"><\/i><\/button><\/div>').appendTo(i).find("button").tooltip({container:"body"});n("body").find('.note-group-select-from-files [accept="image/*"]').attr("accept","image/bmp,image/png,image/jpg,image/jpeg,image/gif")})}).tooltip({title:"点击展开编辑"}),u.value&&r.html(u.value),r.hasClass("open")&&r.trigger("click",{focus:!1}),this)}},bb_editor:function(t,i,r,u,f,e,o){var s=function(){var r=t.getElementsByClassName("editor-body"),u;i==="code"?n(r).hasClass("open")?n(r).summernote("code",o):n(r).html(o):(u={obj:i,method:f,height:e},o&&(u.value=o),n.bb_html5edit(r,u))};r!==""?i.invokeMethodAsync(r).then(t=>{for(var r in t)(function(t,r){r!=null&&(pluginObj={},pluginObj[r]=function(f){var e=n.summernote.ui;f.memo("button."+r,function(){var n=e.button({contents:'<i class="'+t.iconClass+'"><\/i>',container:"body",tooltip:t.tooltip,click:function(){i.invokeMethodAsync(u,r).then(n=>{f.invoke("editor.pasteHTML",n)})}});return this.$button=n.render(),this.$button})},n.extend(n.summernote.plugins,pluginObj))})(t[r],t[r].buttonName);s()}):s()}})}(jQuery),function(n){n.extend({bb_filter:function(t,i,r){n(t).data("bb_filter",{obj:i,method:r})}});n(function(){n(document).on("click",function(t){var i=n(t.target),r=i.closest(".popover-datetime"),u,f,e;r.length==1&&(u=r.attr("id"),f=n('[aria-describedby="'+u+'"]'),f.closest(".datetime-picker").hasClass("is-filter"))||(e=i.closest(".table-filter-item"),e.length==0&&n(".table-filter-item.show").each(function(){var t=n(this).data("bb_filter");t.obj.invokeMethodAsync(t.method)}))});n(document).on("keyup",function(t){var i,r;t.key==="Enter"?(i=n(".table-filter .table-filter-item.show:first"),r=i.data("bb_filter"),r&&(i.removeClass("show"),r.obj.invokeMethodAsync("ConfirmByKey"))):t.key==="Escape"&&(i=n(".table-filter .table-filter-item.show:first"),r=i.data("bb_filter"),r&&(i.removeClass("show"),r.obj.invokeMethodAsync("EscByKey")))})})}(jQuery),function(n){n.extend({bb_toggleFullscreen:function(t,i){var r=t;r&&r!==""||(r=i?document.getElementById(i):document.documentElement);n.bb_IsFullscreen()?(n.bb_ExitFullscreen(),r.classList.remove("fs-open")):(n.bb_Fullscreen(r),r.classList.add("fs-open"))},bb_Fullscreen:function(n){n.requestFullscreen()||n.webkitRequestFullscreen||n.mozRequestFullScreen||n.msRequestFullscreen},bb_ExitFullscreen:function(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()},bb_IsFullscreen:function(){return document.fullscreen||document.webkitIsFullScreen||document.webkitFullScreen||document.mozFullScreen||document.msFullScreent}})}(jQuery),function(n){Number.prototype.toRadians=function(){return this*Math.PI/180};n.extend({bb_geo_distance:function(n,t,i,r){var u=(i-n).toRadians(),f=(r-t).toRadians();n=n.toRadians();i=i.toRadians();var e=Math.sin(u/2)*Math.sin(u/2)+Math.cos(n)*Math.cos(i)*Math.sin(f/2)*Math.sin(f/2),o=2*Math.atan2(Math.sqrt(e),Math.sqrt(1-e));return 6371*o},bb_geo_updateLocaltion:function(t){var f=t.coords.latitude,e=t.coords.longitude,a=t.coords.accuracy,o=t.coords.altitude,s=t.coords.altitudeAccuracy,h=t.coords.heading,c=t.coords.speed,v=t.timestamp,i,l,r,u;if(a>=500){console.warn("Need more accurate values to calculate distance.");return}return i=0,l=0,r!=null&&u!=null&&(i=n.bb_geo_distance(f,e,r,u),l+=i),r=f,u=e,o==null&&(o=0),s==null&&(s=0),h==null&&(h=0),c==null&&(c=0),{latitude:f,longitude:e,accuracy:a,altitude:o,altitudeAccuracy:s,heading:h,speed:c,timestamp:v,currentDistance:i,totalDistance:l,lastLat:r,lastLong:u}},bb_geo_handleLocationError:function(n){switch(n.code){case 0:console.error("There was an error while retrieving your location: "+n.message);break;case 1:console.error("The user prevented this page from retrieving a location.");break;case 2:console.error("The browser was unable to determine your location: "+n.message);break;case 3:console.error("The browser timed out before retrieving the location.")}},bb_geo_getCurrnetPosition:function(t,i){var r=!1;return navigator.geolocation?(r=!0,navigator.geolocation.getCurrentPosition(r=>{var u=n.bb_geo_updateLocaltion(r);t.invokeMethodAsync(i,u)},n.bb_geo_handleLocationError)):console.warn("HTML5 Geolocation is not supported in your browser"),r},bb_geo_watchPosition:function(){var t=0;return navigator.geolocation?t=navigator.geolocation.watchPosition(t=>{n.bb_geo_updateLocaltion(t)},n.bb_geo_handleLocationError,{maximumAge:2e4}):console.warn("HTML5 Geolocation is not supported in your browser"),t},bb_geo_clearWatchLocation:function(n){navigator.geolocation&&navigator.geolocation.clearWatch(n)}})}(jQuery),function(n){n.extend({bb_gotop:function(t,i){var r=n(t),u=r.tooltip();r.on("click",function(t){t.preventDefault();n(i||window).scrollTop(0);u.tooltip("hide")})}})}(jQuery),function(n){n.extend({bb_handwritten:function(n,t,i,r){function u(n){var i,f,e;this.linewidth=1;this.color="#000000";this.background="#fff";for(i in n)this[i]=n[i];this.canvas=document.createElement("canvas");this.el.appendChild(this.canvas);this.cxt=this.canvas.getContext("2d");this.canvas.clientTop=this.el.clientWidth;this.canvas.width=this.el.clientWidth;this.canvas.height=this.el.clientHeight;this.cxt.fillStyle=this.background;this.cxt.fillRect(2,2,this.canvas.width,this.canvas.height);this.cxt.fillStyle=this.background;this.cxt.strokeStyle=this.color;this.cxt.lineWidth=this.linewidth;this.cxt.lineCap="round";var t="ontouchend"in window,s=this,u=!1,o=function(n){u=!0;this.cxt.beginPath();var i=n.target.offsetParent.offsetLeft,r=n.target.offsetParent.offsetTop;t?this.cxt.moveTo(n.changedTouches[0].pageX+2-i,n.changedTouches[0].pageY+2-r):this.cxt.moveTo(n.pageX+2-i,n.pageY+2-r)};t?this.canvas.addEventListener("touchstart",o.bind(this),!1):this.canvas.addEventListener("mousedown",o.bind(this),!1);f=function(n){if(u){var i=n.target.offsetParent.offsetLeft,r=n.target.offsetParent.offsetTop;t?this.cxt.lineTo(n.changedTouches[0].pageX+2-i,n.changedTouches[0].pageY+2-r):this.cxt.lineTo(n.pageX+2-i,n.pageY+2-r);this.cxt.stroke()}};t?this.canvas.addEventListener("touchmove",f.bind(this),!1):this.canvas.addEventListener("mousedown",f.bind(this),!1);e=function(){u=!1;this.cxt.closePath()};t?this.canvas.addEventListener("touchend",e.bind(this),!1):this.canvas.addEventListener("mousedown",e.bind(this),!1);this.clearEl.addEventListener("click",function(){this.cxt.clearRect(2,2,this.canvas.width,this.canvas.height)}.bind(this),!1);this.saveEl.addEventListener("click",function(){var n=this.canvas.toDataURL();return this.obj.invokeMethodAsync(r,n)}.bind(this),!1)}document.body.addEventListener("touchmove",function(n){n.preventDefault()},{passive:!1});new u({el:n.getElementsByClassName("hw-body")[0],clearEl:n.getElementsByClassName("btn-secondary")[0],saveEl:n.getElementsByClassName("btn-primary")[0],obj:t})}})}(jQuery),function(n){n.extend({bb_ImageViewer:function(n,t,i){var r=i.viewer;return i.title=function(n){return n.alt+" ("+(this.index+1)+"/"+this.length+")"},undefined!==i.toolbarlite&&i.toolbarlite==!0&&(i.toolbar={zoomIn:!0,zoomOut:!0,rotateRight:!0}),console.log("viewer0",r),undefined!==r&&null!==r&&i.id==r.element.id&&(r.destroy(),console.log(r.element.id,"destroy")),r=new Viewer(document.getElementById(i.id),i),console.log("viewer",r),console.log(r.element.id),r},bb_ImageViewerDestroy:function(n,t,i){undefined!==i.viewer&&null!==i.viewer&&i.id==i.viewer.element.id&&(i.viewer.destroy(),console.log(i.viewer.element.id,"destroy"))}})}(jQuery);
/*!
 * Viewer.js v1.10.3
 * https://fengyuanchen.github.io/viewerjs
 *
 * Copyright 2015-present Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2022-02-02T05:15:01.702Z
 */
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n="undefined"!=typeof globalThis?globalThis:n||self).Viewer=t()}(this,function(){"use strict";function ci(n,t){var i,r=Object.keys(n);return Object.getOwnPropertySymbols&&(i=Object.getOwnPropertySymbols(n),t&&(i=i.filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})),r.push.apply(r,i)),r}function ti(n){for(var i,t=1;t<arguments.length;t++)i=null!=arguments[t]?arguments[t]:{},t%2?ci(Object(i),!0).forEach(function(t){var r,u;r=n;u=i[t=t];t in r?Object.defineProperty(r,t,{value:u,enumerable:!0,configurable:!0,writable:!0}):r[t]=u}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(i)):ci(Object(i)).forEach(function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(i,t))});return n}function li(n){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function ai(n,t){for(var i,r=0;r<t.length;r++)i=t[r],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}function ht(n){return"string"==typeof n}function h(n){return"number"==typeof n&&!pr(n)}function it(n){return void 0===n}function rt(n){return"object"===li(n)&&null!==n}function ct(n){if(!rt(n))return!1;try{var t=n.constructor,i=t.prototype;return t&&i&&wr.call(i,"isPrototypeOf")}catch(n){return!1}}function u(n){return"function"==typeof n}function f(n,t){if(n&&u(t))if(Array.isArray(n)||h(n.length))for(var r=n.length,i=0;i<r&&!1!==t.call(n,n[i],i,n);i+=1);else rt(n)&&Object.keys(n).forEach(function(i){t.call(n,n[i],i,n)});return n}function y(n,t){var i=n.style;f(t,function(n,t){br.test(t)&&h(n)&&(n+="px");i[t]=n})}function ut(n,t){return n&&t&&(n.classList?n.classList.contains(t):-1<n.className.indexOf(t))}function n(t,i){var r;t&&i&&(h(t.length)?f(t,function(t){n(t,i)}):t.classList?t.classList.add(i):(r=t.className.trim())?r.indexOf(i)<0&&(t.className="".concat(r," ").concat(i)):t.className=i)}function r(n,t){n&&t&&(h(n.length)?f(n,function(n){r(n,t)}):n.classList?n.classList.remove(t):0<=n.className.indexOf(t)&&(n.className=n.className.replace(t,"")))}function lt(t,i,u){i&&(h(t.length)?f(t,function(n){lt(n,i,u)}):(u?n:r)(t,i))}function fi(n){return n.replace(kr,"$1-$2").toLowerCase()}function ft(n,t){return rt(n[t])?n[t]:n.dataset?n.dataset[t]:n.getAttribute("data-".concat(fi(t)))}function ei(n,t,i){rt(i)?n[t]=i:n.dataset?n.dataset[t]=i:n.setAttribute("data-".concat(fi(t)),i)}function e(n,t,i,r){var f=3<arguments.length&&void 0!==r?r:{},u=i;t.trim().split(ui).forEach(function(t){var r;hi||(r=n.listeners)&&r[t]&&r[t][i]&&(u=r[t][i],delete r[t][i],0===Object.keys(r[t]).length&&delete r[t],0===Object.keys(r).length&&delete n.listeners);n.removeEventListener(t,u,f)})}function t(n,t,i,r){var u=3<arguments.length&&void 0!==r?r:{},f=i;t.trim().split(ui).forEach(function(t){var e,r;u.once&&!hi&&(e=n.listeners,f=function(){delete r[t][i];n.removeEventListener(t,f,u);for(var o=arguments.length,s=new Array(o),e=0;e<o;e++)s[e]=arguments[e];i.apply(n,s)},(r=void 0===e?{}:e)[t]||(r[t]={}),r[t][i]&&n.removeEventListener(t,r[t][i],u),r[t][i]=f,n.listeners=r);n.addEventListener(t,f,u)})}function s(n,t,i,r){var f;return u(Event)&&u(CustomEvent)?f=new CustomEvent(t,ti({bubbles:!0,cancelable:!0,detail:i},r)):(f=document.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,i),n.dispatchEvent(f)}function kt(n){var r=n.rotate,u=n.scaleX,f=n.scaleY,i=n.translateX,n=n.translateY,t=[],i=(h(i)&&0!==i&&t.push("translateX(".concat(i,"px)")),h(n)&&0!==n&&t.push("translateY(".concat(n,"px)")),h(r)&&0!==r&&t.push("rotate(".concat(r,"deg)")),h(u)&&1!==u&&t.push("scaleX(".concat(u,")")),h(f)&&1!==f&&t.push("scaleY(".concat(f,")")),t.length?t.join(" "):"none");return{WebkitTransform:i,msTransform:i,transform:i}}function or(n,t,i){var r=document.createElement("img"),u;return n.naturalWidth&&!dt?(i(n.naturalWidth,n.naturalHeight),r):(u=document.body||document.documentElement,r.onload=function(){i(r.width,r.height);dt||u.removeChild(r)},f(t.inheritedAttributes,function(t){var i=n.getAttribute(t);null!==i&&r.setAttribute(t,i)}),r.src=n.src,dt||(r.style.cssText="left:0;max-height:none!important;max-width:none!important;min-height:0!important;min-width:0!important;opacity:0;position:absolute;top:0;z-index:-1;",u.appendChild(r)),r)}function gt(n){switch(n){case 2:return vr;case 3:return ar;case 4:return lr;default:return""}}function ni(n,t){var i=n.pageX,n=n.pageY,r={endX:i,endY:n};return t?r:ti({timeStamp:Date.now(),startX:i,startY:n},r)}var vi={backdrop:!0,button:!0,navbar:!0,title:!0,toolbar:!0,className:"",container:"body",filter:null,fullscreen:!0,inheritedAttributes:["crossOrigin","decoding","isMap","loading","referrerPolicy","sizes","srcset","useMap"],initialViewIndex:0,inline:!1,interval:5e3,keyboard:!0,focus:!0,loading:!0,loop:!0,minWidth:200,minHeight:100,movable:!0,rotatable:!0,scalable:!0,zoomable:!0,zoomOnTouch:!0,zoomOnWheel:!0,slideOnTouch:!0,toggleOnDblclick:!0,tooltip:!0,transition:!0,zIndex:2015,zIndexInline:0,zoomRatio:.1,minZoomRatio:.01,maxZoomRatio:100,url:"src",ready:null,show:null,shown:null,hide:null,hidden:null,view:null,viewed:null,move:null,moved:null,rotate:null,rotated:null,scale:null,scaled:null,zoom:null,zoomed:null,play:null,stop:null},w="undefined"!=typeof window&&void 0!==window.document,l=w?window:{},d=!(!w||!l.document.documentElement)&&"ontouchstart"in l.document.documentElement,b=w&&"PointerEvent"in l,i="viewer",at="move",yi="switch",et="zoom",vt="".concat(i,"-active"),hr="".concat(i,"-close"),yt="".concat(i,"-fade"),ii="".concat(i,"-fixed"),cr="".concat(i,"-fullscreen"),pi="".concat(i,"-fullscreen-exit"),k="".concat(i,"-hide"),lr="".concat(i,"-hide-md-down"),ar="".concat(i,"-hide-sm-down"),vr="".concat(i,"-hide-xs-down"),p="".concat(i,"-in"),ot="".concat(i,"-invisible"),g="".concat(i,"-loading"),yr="".concat(i,"-move"),wi="".concat(i,"-open"),nt="".concat(i,"-show"),o="".concat(i,"-transition"),tt="click",ri="dblclick",bi="dragstart",ki="focusin",di="keydown",a="load",pt="error",gi=b?"pointerdown":d?"touchstart":"mousedown",nr=b?"pointermove":d?"touchmove":"mousemove",tr=b?"pointerup pointercancel":d?"touchend touchcancel":"mouseup",ir="resize",v="transitionend",rr="wheel",ur="ready",fr="show",st="viewed",er="rotated",wt="".concat(i,"Action"),ui=/\s\s*/,bt=["zoom-in","zoom-out","one-to-one","reset","prev","play","next","rotate-left","rotate-right","flip-horizontal","flip-vertical"],pr=Number.isNaN||l.isNaN,wr=Object.prototype.hasOwnProperty,c=Object.assign||function(n){for(var i=arguments.length,r=new Array(1<i?i-1:0),t=1;t<i;t++)r[t-1]=arguments[t];return rt(n)&&0<r.length&&r.forEach(function(t){rt(t)&&Object.keys(t).forEach(function(i){n[i]=t[i]})}),n},br=/^(?:width|height|left|top|marginLeft|marginTop)$/,kr=/([a-z\d])([A-Z])/g,oi,si,hi,dt;si=!1;w&&(oi=!1,b=function(){},w=Object.defineProperty({},"once",{get:function(){return si=!0,oi},set:function(n){oi=n}}),l.addEventListener("test",b,w),l.removeEventListener("test",b,w));hi=si;dt=l.navigator&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(l.navigator.userAgent);var sr,b={render:function(){this.initContainer();this.initViewer();this.initList();this.renderViewer()},initBody:function(){var n=this.element.ownerDocument,t=n.body||n.documentElement;this.body=t;this.scrollbarWidth=window.innerWidth-n.documentElement.clientWidth;this.initialBodyPaddingRight=t.style.paddingRight;this.initialBodyComputedPaddingRight=window.getComputedStyle(t).paddingRight},initContainer:function(){this.containerData={width:window.innerWidth,height:window.innerHeight}},initViewer:function(){var n,t=this.options,i=this.parent;t.inline&&(n={width:Math.max(i.offsetWidth,t.minWidth),height:Math.max(i.offsetHeight,t.minHeight)},this.parentData=n);!this.fulled&&n||(n=this.containerData);this.viewerData=c({},n)},renderViewer:function(){this.options.inline&&!this.fulled&&y(this.viewer,this.viewerData)},initList:function(){var s=this,c=this.element,i=this.options,u=this.list,h=[];u.innerHTML="";f(this.images,function(n,t){var r,e,o=n.src,c=n.alt||(ht(c=o)?decodeURIComponent(c.replace(/^.*\//,"").replace(/[?&#].*$/,"")):""),l=s.getImageURL(n);(o||l)&&(r=document.createElement("li"),e=document.createElement("img"),f(i.inheritedAttributes,function(t){var i=n.getAttribute(t);null!==i&&e.setAttribute(t,i)}),e.src=o||l,e.alt=c,e.setAttribute("data-original-url",l||o),r.setAttribute("data-index",t),r.setAttribute("data-viewer-action","view"),r.setAttribute("role","button"),i.keyboard&&r.setAttribute("tabindex",0),r.appendChild(e),u.appendChild(r),h.push(r))});f(this.items=h,function(u){var o,h,f=u.firstElementChild;ei(f,"filled",!0);i.loading&&n(u,g);t(f,a,o=function(n){e(f,pt,h);i.loading&&r(u,g);s.loadImage(n)},{once:!0});t(f,pt,h=function(){e(f,a,o);i.loading&&r(u,g)},{once:!0})});i.transition&&t(c,st,function(){n(u,o)},{once:!0})},renderList:function(){var t,i,r=this.index,n=this.items[r];n&&(t=n.nextElementSibling,t=parseInt(window.getComputedStyle(t||n).marginLeft,10),n=n.offsetWidth,y(this.list,c({width:(i=n+t)*this.length-t},kt({translateX:(this.viewerData.width-n)/2-i*r}))))},resetList:function(){var n=this.list;n.innerHTML="";r(n,o);y(n,kt({translateX:0}))},initImage:function(n){var e,r=this,u=this.options,h=this.image,o=this.viewerData,s=this.footer.offsetHeight,t=o.width,i=Math.max(o.height-s,s),f=this.imageData||{};this.imageInitializing={abort:function(){e.onload=null}};e=or(h,u,function(e,o){var v=e/o,h=t,a=i,s=(r.imageInitializing=!1,t<i*v?a=t/v:h=i*v,h=Math.min(.9*h,e),a=Math.min(.9*a,o),(t-h)/2),l=(i-a)/2,s={left:s,top:l,x:s,y:l,width:h,height:a,oldRatio:1,ratio:h/e,aspectRatio:v,naturalWidth:e,naturalHeight:o},l=c({},s);u.rotatable&&(s.rotate=f.rotate||0,l.rotate=0);u.scalable&&(s.scaleX=f.scaleX||1,s.scaleY=f.scaleY||1,l.scaleX=1,l.scaleY=1);r.imageData=s;r.initialImageData=l;n&&n()})},renderImage:function(n){var u,f=this,r=this.image,i=this.imageData;y(r,c({width:i.width,height:i.height,marginLeft:i.x,marginTop:i.y},kt(i)));n&&((this.viewing||this.moving||this.rotating||this.scaling||this.zooming)&&this.options.transition&&ut(r,o)?(u=function(){f.imageRendering=!1;n()},this.imageRendering={abort:function(){e(r,v,u)}},t(r,v,u,{once:!0})):n())},resetImage:function(){var n;(this.viewing||this.viewed)&&(n=this.image,this.viewing&&this.viewing.abort(),n.parentNode.removeChild(n),this.image=null)}},w={bind:function(){var n=this.options,i=this.viewer,u=this.canvas,r=this.element.ownerDocument;t(i,tt,this.onClick=this.click.bind(this));t(i,bi,this.onDragStart=this.dragstart.bind(this));t(u,gi,this.onPointerDown=this.pointerdown.bind(this));t(r,nr,this.onPointerMove=this.pointermove.bind(this));t(r,tr,this.onPointerUp=this.pointerup.bind(this));t(r,di,this.onKeyDown=this.keydown.bind(this));t(window,ir,this.onResize=this.resize.bind(this));n.zoomable&&n.zoomOnWheel&&t(i,rr,this.onWheel=this.wheel.bind(this),{passive:!1,capture:!0});n.toggleOnDblclick&&t(u,ri,this.onDblclick=this.dblclick.bind(this))},unbind:function(){var n=this.options,t=this.viewer,r=this.canvas,i=this.element.ownerDocument;e(t,tt,this.onClick);e(t,bi,this.onDragStart);e(r,gi,this.onPointerDown);e(i,nr,this.onPointerMove);e(i,tr,this.onPointerUp);e(i,di,this.onKeyDown);e(window,ir,this.onResize);n.zoomable&&n.zoomOnWheel&&e(t,rr,this.onWheel,{passive:!1,capture:!0});n.toggleOnDblclick&&e(r,ri,this.onDblclick)}},dr={click:function(n){var i=this.options,u=this.imageData,t=n.target,r=ft(t,wt);switch(r||"img"!==t.localName||"li"!==t.parentElement.localName||(r=ft(t=t.parentElement,wt)),d&&n.isTrusted&&t===this.canvas&&clearTimeout(this.clickCanvasTimeout),r){case"mix":this.played?this.stop():i.inline?this.fulled?this.exit():this.full():this.hide();break;case"hide":this.hide();break;case"view":this.view(ft(t,"index"));break;case"zoom-in":this.zoom(.1,!0);break;case"zoom-out":this.zoom(-.1,!0);break;case"one-to-one":this.toggle();break;case"reset":this.reset();break;case"prev":this.prev(i.loop);break;case"play":this.play(i.fullscreen);break;case"next":this.next(i.loop);break;case"rotate-left":this.rotate(-90);break;case"rotate-right":this.rotate(90);break;case"flip-horizontal":this.scaleX(-u.scaleX||-1);break;case"flip-vertical":this.scaleY(-u.scaleY||-1);break;default:this.played&&this.stop()}},dblclick:function(n){n.preventDefault();this.viewed&&n.target===this.image&&(d&&n.isTrusted&&clearTimeout(this.doubleClickImageTimeout),this.toggle(n.isTrusted?n:n.detail&&n.detail.originalEvent))},load:function(){var f=this,e=(this.timeout&&(clearTimeout(this.timeout),this.timeout=!1),this.element),n=this.options,i=this.image,h=this.index,c=this.viewerData;r(i,ot);n.loading&&r(this.canvas,g);i.style.cssText="height:0;"+"margin-left:".concat(c.width/2,"px;")+"margin-top:".concat(c.height/2,"px;")+"max-width:none!important;position:relative;width:0;";this.initImage(function(){lt(i,yr,n.movable);lt(i,o,n.transition);f.renderImage(function(){f.viewed=!0;f.viewing=!1;u(n.viewed)&&t(e,st,n.viewed,{once:!0});s(e,st,{originalImage:f.images[h],index:h,image:i},{cancelable:!1})})})},loadImage:function(n){var r=n.target,n=r.parentNode,t=n.offsetWidth||30,i=n.offsetHeight||50,u=!!ft(r,"filled");or(r,this.options,function(n,f){var n=n/f,f=t,e=i;t<i*n?u?f=i*n:e=t/n:u?e=t/n:f=i*n;y(r,c({width:f,height:e},kt({translateX:(t-f)/2,translateY:(i-e)/2})))})},keydown:function(n){var t=this.options,i;if(t.keyboard&&(i=n.keyCode||n.which||n.charCode,13===i&&this.viewer.contains(n.target)&&this.click(n),this.fulled))switch(i){case 27:this.played?this.stop():t.inline?this.fulled&&this.exit():this.hide();break;case 32:this.played&&this.stop();break;case 37:this.prev(t.loop);break;case 38:n.preventDefault();this.zoom(t.zoomRatio,!0);break;case 39:this.next(t.loop);break;case 40:n.preventDefault();this.zoom(-t.zoomRatio,!0);break;case 48:case 49:n.ctrlKey&&(n.preventDefault(),this.toggle())}},dragstart:function(n){"img"===n.target.localName&&n.preventDefault()},pointerdown:function(n){var i=this.options,u=this.pointers,t=n.buttons,e=n.button;!this.viewed||this.showing||this.viewing||this.hiding||("mousedown"===n.type||"pointerdown"===n.type&&"mouse"===n.pointerType)&&(h(t)&&1!==t||h(e)&&0!==e||n.ctrlKey)||(n.preventDefault(),n.changedTouches?f(n.changedTouches,function(n){u[n.identifier]=ni(n)}):u[n.pointerId||0]=ni(n),t=!!i.movable&&at,i.zoomOnTouch&&i.zoomable&&1<Object.keys(u).length?t=et:i.slideOnTouch&&("touch"===n.pointerType||"touchstart"===n.type)&&this.isSwitchable()&&(t=yi),!i.transition||t!==at&&t!==et||r(this.image,o),this.action=t)},pointermove:function(n){var t=this.pointers,i=this.action;this.viewed&&i&&(n.preventDefault(),n.changedTouches?f(n.changedTouches,function(n){c(t[n.identifier]||{},ni(n,!0))}):c(t[n.pointerId||0]||{},ni(n,!0)),this.change(n))},pointerup:function(t){var i,h=this,r=this.options,u=this.action,e=this.pointers;t.changedTouches?f(t.changedTouches,function(n){i=e[n.identifier];delete e[n.identifier]}):(i=e[t.pointerId||0],delete e[t.pointerId||0]);u&&(t.preventDefault(),!r.transition||u!==at&&u!==et||n(this.image,o),this.action=!1,d&&u!==et&&i&&Date.now()-i.timeStamp<500&&(clearTimeout(this.clickCanvasTimeout),clearTimeout(this.doubleClickImageTimeout),r.toggleOnDblclick&&this.viewed&&t.target===this.image?this.imageClicked?(this.imageClicked=!1,this.doubleClickImageTimeout=setTimeout(function(){s(h.image,ri,{originalEvent:t})},50)):(this.imageClicked=!0,this.doubleClickImageTimeout=setTimeout(function(){h.imageClicked=!1},500)):(this.imageClicked=!1,r.backdrop&&"static"!==r.backdrop&&t.target===this.canvas&&(this.clickCanvasTimeout=setTimeout(function(){s(h.canvas,tt,{originalEvent:t})},50)))))},resize:function(){var n=this;this.isShown&&!this.hiding&&(this.fulled&&(this.close(),this.initBody(),this.open()),this.initContainer(),this.initViewer(),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){n.renderImage()}),this.played&&(!this.options.fullscreen||!this.fulled||document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?f(this.player.getElementsByTagName("img"),function(i){t(i,a,n.loadImage.bind(n),{once:!0});s(i,a)}):this.stop()))},wheel:function(n){var i,t,r=this;this.viewed&&(n.preventDefault(),this.wheeling||(this.wheeling=!0,setTimeout(function(){r.wheeling=!1},50),i=Number(this.options.zoomRatio)||.1,t=1,n.deltaY?t=0<n.deltaY?1:-1:n.wheelDelta?t=-n.wheelDelta/120:n.detail&&(t=0<n.detail?1:-1),this.zoom(-t*i,!0,n)))}},gr={show:function(){var c=0<arguments.length&&void 0!==arguments[0]&&arguments[0],l=this.element,f=this.options,h,i;return f.inline||this.showing||this.isShown||this.showing?this:this.ready?(u(f.show)&&t(l,fr,f.show,{once:!0}),!1===s(l,fr)||!this.ready)?this:(this.hiding&&this.transitioning.abort(),this.showing=!0,this.open(),i=this.viewer,r(i,k),i.setAttribute("role","dialog"),i.setAttribute("aria-labelledby",this.title.id),i.setAttribute("aria-modal",!0),i.removeAttribute("aria-hidden"),f.transition&&!c?(h=this.shown.bind(this),this.transitioning={abort:function(){e(i,v,h);r(i,p)}},n(i,o),i.initialOffsetWidth=i.offsetWidth,t(i,v,h,{once:!0}),n(i,p)):(n(i,p),this.shown()),this):(this.build(),this.ready&&this.show(c),this)},hide:function(){var c=this,a=0<arguments.length&&void 0!==arguments[0]&&arguments[0],y=this.element,i=this.options;if(i.inline||this.hiding||!this.isShown&&!this.showing||(u(i.hide)&&t(y,"hide",i.hide,{once:!0}),!1===s(y,"hide")))return this;this.showing&&this.transitioning.abort();this.hiding=!0;this.played?this.stop():this.viewing&&this.viewing.abort();var l,f,n=this.viewer,h=this.image,w=function(){r(n,p);c.hidden()};return i.transition&&!a?(l=function a(t){t&&t.target===n&&(e(n,v,a),c.hidden())},f=function(){ut(n,o)?(t(n,v,l),r(n,p)):w()},this.transitioning={abort:function(){c.viewed&&ut(h,o)?e(h,v,f):ut(n,o)&&e(n,v,l)}},this.viewed&&ut(h,o)?(t(h,v,f,{once:!0}),this.zoomTo(0,!1,null,!0)):f()):w(),this},view:function(){function nt(){var t=o.imageData,n=Array.isArray(c.title)?c.title[1]:c.title;k.innerHTML=ht(n=u(n)?n.call(o,i,t):"".concat(d," (").concat(t.naturalWidth," × ").concat(t.naturalHeight,")"))?n.replace(/&(?!amp;|quot;|#39;|lt;|gt;)/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;"):n}var o=this,h=0<arguments.length&&void 0!==arguments[0]?arguments[0]:this.options.initialViewIndex,h=Number(h)||0,b,tt,l;if(this.hiding||this.played||h<0||h>=this.length||this.viewed&&h===this.index)return this;if(!this.isShown)return this.index=h,this.show();this.viewing&&this.viewing.abort();var v=this.element,c=this.options,k=this.title,p=this.canvas,y=this.items[h],w=y.querySelector("img"),l=ft(w,"originalUrl"),d=w.getAttribute("alt"),i=document.createElement("img");return(f(c.inheritedAttributes,function(n){var t=w.getAttribute(n);null!==t&&i.setAttribute(n,t)}),i.src=l,i.alt=d,u(c.view)&&t(v,"view",c.view,{once:!0}),!1===s(v,"view",{originalImage:this.images[h],index:h,image:i})||!this.isShown||this.hiding||this.played)?this:(l=this.items[this.index],l&&(r(l,vt),l.removeAttribute("aria-selected")),n(y,vt),y.setAttribute("aria-selected",!0),c.focus&&y.focus(),this.image=i,this.viewed=!1,this.index=h,this.imageData={},n(i,ot),c.loading&&n(p,g),p.innerHTML="",p.appendChild(i),this.renderList(),k.innerHTML="",t(v,st,nt,{once:!0}),this.viewing={abort:function(){e(v,st,nt);i.complete?o.imageRendering?o.imageRendering.abort():o.imageInitializing&&o.imageInitializing.abort():(i.src="",e(i,a,b),o.timeout&&clearTimeout(o.timeout))}},i.complete?this.load():(t(i,a,b=function(){e(i,pt,tt);o.load()},{once:!0}),t(i,pt,tt=function(){e(i,a,b);o.timeout&&(clearTimeout(o.timeout),o.timeout=!1);r(i,ot);c.loading&&r(o.canvas,g)},{once:!0}),this.timeout&&clearTimeout(this.timeout),this.timeout=setTimeout(function(){r(i,ot);o.timeout=!1},1e3)),this)},prev:function(){var n=this.index-1;return n<0&&(n=0<arguments.length&&void 0!==arguments[0]&&arguments[0]?this.length-1:0),this.view(n),this},next:function(){var t=this.length-1,n=this.index+1;return this.view(n=t<n?0<arguments.length&&void 0!==arguments[0]&&arguments[0]?0:t:n),this},move:function(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n,i=this.imageData;return this.moveTo(it(n)?n:i.x+Number(n),it(t)?t:i.y+Number(t)),this},moveTo:function(n){var v=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n,a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,e=this.element,f=this.options,r=this.imageData;if(n=Number(n),i=Number(i),this.viewed&&!this.played&&f.movable){var o=r.x,c=r.y,l=!1;if(h(n)?l=!0:n=o,h(i)?l=!0:i=c,l){if(u(f.move)&&t(e,"move",f.move,{once:!0}),!1===s(e,"move",{x:n,y:i,oldX:o,oldY:c,originalEvent:a}))return this;r.x=n;r.y=i;r.left=n;r.top=i;this.moving=!0;this.renderImage(function(){v.moving=!1;u(f.moved)&&t(e,"moved",f.moved,{once:!0});s(e,"moved",{x:n,y:i,oldX:o,oldY:c,originalEvent:a},{cancelable:!1})})}}return this},rotate:function(n){return this.rotateTo((this.imageData.rotate||0)+Number(n)),this},rotateTo:function(n){var o=this,r=this.element,i=this.options,e=this.imageData,f;if(h(n=Number(n))&&this.viewed&&!this.played&&i.rotatable){if(f=e.rotate,u(i.rotate)&&t(r,"rotate",i.rotate,{once:!0}),!1===s(r,"rotate",{degree:n,oldDegree:f}))return this;e.rotate=n;this.rotating=!0;this.renderImage(function(){o.rotating=!1;u(i.rotated)&&t(r,er,i.rotated,{once:!0});s(r,er,{degree:n,oldDegree:f},{cancelable:!1})})}return this},scaleX:function(n){return this.scale(n,this.imageData.scaleY),this},scaleY:function(n){return this.scale(this.imageData.scaleX,n),this},scale:function(n){var a=this,i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:n,f=this.element,r=this.options,e=this.imageData;if(n=Number(n),i=Number(i),this.viewed&&!this.played&&r.scalable){var o=e.scaleX,c=e.scaleY,l=!1;if(h(n)?l=!0:n=o,h(i)?l=!0:i=c,l){if(u(r.scale)&&t(f,"scale",r.scale,{once:!0}),!1===s(f,"scale",{scaleX:n,scaleY:i,oldScaleX:o,oldScaleY:c}))return this;e.scaleX=n;e.scaleY=i;this.scaling=!0;this.renderImage(function(){a.scaling=!1;u(r.scaled)&&t(f,"scaled",r.scaled,{once:!0});s(f,"scaled",{scaleX:n,scaleY:i,oldScaleX:o,oldScaleY:c},{cancelable:!1})})}}return this},zoom:function(n){var i=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,t=this.imageData;return n=Number(n),this.zoomTo(t.width*(n=n<0?1/(1-n):1+n)/t.naturalWidth,i,r),this},zoomTo:function(n){var p,w,a,tt=this,it=1<arguments.length&&void 0!==arguments[1]&&arguments[1],e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null,o=3<arguments.length&&void 0!==arguments[3]&&arguments[3],v=this.element,r=this.options,c=this.pointers,i=this.imageData,rt=i.x,ut=i.y,g=i.width,nt=i.height,b=i.naturalWidth,k=i.naturalHeight;if(h(n=Math.max(0,n))&&this.viewed&&!this.played&&(o||r.zoomable)){if(o||(o=Math.max(.01,r.minZoomRatio),y=Math.min(100,r.maxZoomRatio),n=Math.min(Math.max(n,o),y)),e)switch(e.type){case"wheel":.055<=r.zoomRatio&&.95<n&&n<1.05&&(n=1);break;case"pointermove":case"touchmove":case"mousemove":.99<n&&n<1.01&&(n=1)}var l,o=b*n,y=k*n,b=o-g,k=y-nt,d=i.ratio;if(u(r.zoom)&&t(v,"zoom",r.zoom,{once:!0}),!1===s(v,"zoom",{ratio:n,oldRatio:d,originalEvent:e}))return this;this.zooming=!0;e?(l={left:(l=(l=this.viewer).getBoundingClientRect()).left+(window.pageXOffset-document.documentElement.clientLeft),top:l.top+(window.pageYOffset-document.documentElement.clientTop)},c=c&&0<Object.keys(c).length?(a=w=p=0,f(c,function(n){var t=n.startX,n=n.startY;p+=t;w+=n;a+=1}),{pageX:p/=a,pageY:w/=a}):{pageX:e.pageX,pageY:e.pageY},i.x-=(c.pageX-l.left-rt)/g*b,i.y-=(c.pageY-l.top-ut)/nt*k):(i.x-=b/2,i.y-=k/2);i.left=i.x;i.top=i.y;i.width=o;i.height=y;i.oldRatio=d;i.ratio=n;this.renderImage(function(){tt.zooming=!1;u(r.zoomed)&&t(v,"zoomed",r.zoomed,{once:!0});s(v,"zoomed",{ratio:n,oldRatio:d,originalEvent:e},{cancelable:!1})});it&&this.tooltip()}return this},play:function(){var k=this,c=0<arguments.length&&void 0!==arguments[0]&&arguments[0],l,i;if(!this.isShown||this.played||(l=this.element,i=this.options,u(i.play)&&t(l,"play",i.play,{once:!0}),!1===s(l,"play")))return this;var w=this.player,b=this.loadImage.bind(this),v=[],y=0,e=0;return this.played=!0,this.onLoadWhenPlay=b,c&&this.requestFullscreen(c),n(w,nt),f(this.items,function(r,u){var s=r.querySelector("img"),f=document.createElement("img");f.src=ft(s,"originalUrl");f.alt=s.getAttribute("alt");f.referrerPolicy=s.referrerPolicy;y+=1;n(f,yt);lt(f,o,i.transition);ut(r,vt)&&(n(f,p),e=u);v.push(f);t(f,a,b,{once:!0});w.appendChild(f)}),h(i.interval)&&0<i.interval&&1<y&&function c(){k.playing=setTimeout(function(){r(v[e],p);n(v[e=(e+=1)<y?e:0],p);c()},i.interval)}(),this},stop:function(){var o=this,i,n;return this.played?(i=this.element,n=this.options,u(n.stop)&&t(i,"stop",n.stop,{once:!0}),!1===s(i,"stop"))?this:(n=this.player,this.played=!1,clearTimeout(this.playing),f(n.getElementsByTagName("img"),function(n){e(n,a,o.onLoadWhenPlay)}),r(n,nt),n.innerHTML="",this.exitFullscreen(),this):this},full:function(){var e=this,i=this.options,t=this.viewer,u=this.image,f=this.list;return!this.isShown||this.played||this.fulled||!i.inline||(this.fulled=!0,this.open(),n(this.button,pi),i.transition&&(r(f,o),this.viewed&&r(u,o)),n(t,ii),t.setAttribute("role","dialog"),t.setAttribute("aria-labelledby",this.title.id),t.setAttribute("aria-modal",!0),t.removeAttribute("style"),y(t,{zIndex:i.zIndex}),i.focus&&this.enforceFocus(),this.initContainer(),this.viewerData=c({},this.containerData),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){i.transition&&setTimeout(function(){n(u,o);n(f,o)},0)})})),this},exit:function(){var e=this,t=this.options,i=this.viewer,u=this.image,f=this.list;return this.isShown&&!this.played&&this.fulled&&t.inline&&(this.fulled=!1,this.close(),r(this.button,pi),t.transition&&(r(f,o),this.viewed&&r(u,o)),t.focus&&this.clearEnforceFocus(),i.removeAttribute("role"),i.removeAttribute("aria-labelledby"),i.removeAttribute("aria-modal"),r(i,ii),y(i,{zIndex:t.zIndexInline}),this.viewerData=c({},this.parentData),this.renderViewer(),this.renderList(),this.viewed&&this.initImage(function(){e.renderImage(function(){t.transition&&setTimeout(function(){n(u,o);n(f,o)},0)})})),this},tooltip:function(){var u=this,f=this.options,i=this.tooltipBox,e=this.imageData;return this.viewed&&!this.played&&f.tooltip&&(i.textContent="".concat(Math.round(100*e.ratio),"%"),this.tooltipping?clearTimeout(this.tooltipping):f.transition?(this.fading&&s(i,v),n(i,nt),n(i,yt),n(i,o),i.removeAttribute("aria-hidden"),i.initialOffsetWidth=i.offsetWidth,n(i,p)):(n(i,nt),i.removeAttribute("aria-hidden")),this.tooltipping=setTimeout(function(){f.transition?(t(i,v,function(){r(i,nt);r(i,yt);r(i,o);i.setAttribute("aria-hidden",!0);u.fading=!1},{once:!0}),r(i,p),u.fading=!0):(r(i,nt),i.setAttribute("aria-hidden",!0));u.tooltipping=!1},1e3)),this},toggle:function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:null;return 1===this.imageData.ratio?this.zoomTo(this.imageData.oldRatio,!0,n):this.zoomTo(1,!0,n),this},reset:function(){return this.viewed&&!this.played&&(this.imageData=c({},this.initialImageData),this.renderImage()),this},update:function(){var o=this,i=this.element,s=this.options,r=this.isImg,e,t;return r&&!i.parentNode?this.destroy():(t=[],f(r?[i]:i.querySelectorAll("img"),function(n){u(s.filter)?s.filter.call(o,n)&&t.push(n):o.getImageURL(n)&&t.push(n)}),t.length&&(this.images=t,this.length=t.length,this.ready?(e=[],f(this.items,function(n,i){var n=n.querySelector("img"),r=t[i];r&&n&&r.src===n.src&&r.alt===n.alt||e.push(i)}),y(this.list,{width:"auto"}),this.initList(),this.isShown&&(this.length?this.viewed&&(0<=(r=e.indexOf(this.index))?(this.viewed=!1,this.view(Math.max(Math.min(this.index-r,this.length-1),0))):(n(i=this.items[this.index],vt),i.setAttribute("aria-selected",!0))):(this.image=null,this.viewed=!1,this.index=0,this.imageData={},this.canvas.innerHTML="",this.title.innerHTML=""))):this.build()),this)},destroy:function(){var n=this.element,t=this.options;return n[i]&&(this.destroyed=!0,this.ready?(this.played&&this.stop(),t.inline?(this.fulled&&this.exit(),this.unbind()):this.isShown?(this.viewing&&(this.imageRendering?this.imageRendering.abort():this.imageInitializing&&this.imageInitializing.abort()),this.hiding&&this.transitioning.abort(),this.hidden()):this.showing&&(this.transitioning.abort(),this.hidden()),this.ready=!1,this.viewer.parentNode.removeChild(this.viewer)):t.inline&&(this.delaying?this.delaying.abort():this.initializing&&this.initializing.abort()),t.inline||e(n,tt,this.onStart),n[i]=void 0),this}},nu={getImageURL:function(n){var t=this.options.url;return ht(t)?n.getAttribute(t):u(t)?t.call(this,n):""},enforceFocus:function(){var n=this;this.clearEnforceFocus();t(document,ki,this.onFocusin=function(t){var i=n.viewer,t=t.target;t===document||t===i||i.contains(t)||null!==t.getAttribute("tabindex")&&"true"===t.getAttribute("aria-modal")||i.focus()})},clearEnforceFocus:function(){this.onFocusin&&(e(document,ki,this.onFocusin),this.onFocusin=null)},open:function(){var t=this.body;n(t,wi);t.style.paddingRight="".concat(this.scrollbarWidth+(parseFloat(this.initialBodyComputedPaddingRight)||0),"px")},close:function(){var n=this.body;r(n,wi);n.style.paddingRight=this.initialBodyPaddingRight},shown:function(){var i=this.element,n=this.options,r=this.viewer;this.fulled=!0;this.isShown=!0;this.render();this.bind();this.showing=!1;n.focus&&(r.focus(),this.enforceFocus());u(n.shown)&&t(i,"shown",n.shown,{once:!0});!1!==s(i,"shown")&&this.ready&&this.isShown&&!this.hiding&&this.view(this.index)},hidden:function(){var f=this.element,r=this.options,i=this.viewer;r.fucus&&this.clearEnforceFocus();this.fulled=!1;this.viewed=!1;this.isShown=!1;this.close();this.unbind();n(i,k);i.removeAttribute("role");i.removeAttribute("aria-labelledby");i.removeAttribute("aria-modal");i.setAttribute("aria-hidden",!0);this.resetList();this.resetImage();this.hiding=!1;this.destroyed||(u(r.hidden)&&t(f,"hidden",r.hidden,{once:!0}),s(f,"hidden",null,{cancelable:!1}))},requestFullscreen:function(n){var t=this.element.ownerDocument;!this.fulled||t.fullscreenElement||t.webkitFullscreenElement||t.mozFullScreenElement||t.msFullscreenElement||((t=t.documentElement).requestFullscreen?ct(n)?t.requestFullscreen(n):t.requestFullscreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):t.mozRequestFullScreen?t.mozRequestFullScreen():t.msRequestFullscreen&&t.msRequestFullscreen())},exitFullscreen:function(){var n=this.element.ownerDocument;this.fulled&&(n.fullscreenElement||n.webkitFullscreenElement||n.mozFullScreenElement||n.msFullscreenElement)&&(n.exitFullscreen?n.exitFullscreen():n.webkitExitFullscreen?n.webkitExitFullscreen():n.mozCancelFullScreen?n.mozCancelFullScreen():n.msExitFullscreen&&n.msExitFullscreen())},change:function(n){var h=this.options,u=this.pointers,t=u[Object.keys(u)[0]],o,e,i,s,r;if(t){i=t.endX-t.startX;s=t.endY-t.startY;switch(this.action){case at:this.move(i,s,n);break;case et:this.zoom((o=ti({},r=u),e=[],f(r,function(n,t){delete o[t];f(o,function(t){var i=Math.abs(n.startX-t.startX),r=Math.abs(n.startY-t.startY),u=Math.abs(n.endX-t.endX),t=Math.abs(n.endY-t.endY),i=Math.sqrt(i*i+r*r),r=Math.sqrt(u*u+t*t);e.push((r-i)/i)})}),e.sort(function(n,t){return Math.abs(n)<Math.abs(t)}),e[0]),!1,n);break;case yi:this.action="switched";r=Math.abs(i);1<r&&r>Math.abs(s)&&(this.pointers={},1<i?this.prev(h.loop):i<-1&&this.next(h.loop))}f(u,function(n){n.startX=n.endX;n.startY=n.endY})}},isSwitchable:function(){var n=this.imageData,t=this.viewerData;return 1<this.length&&0<=n.x&&0<=n.y&&n.width<=t.width&&n.height<=t.height}},tu=l.Viewer,iu=(sr=-1,function(){return sr+=1}),l=function(){function r(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},i=this,u=r;if(!(i instanceof u))throw new TypeError("Cannot call a class as a function");if(!n||1!==n.nodeType)throw new Error("The first argument is required and must be an element.");this.element=n;this.options=c({},vi,ct(t)&&t);this.action=!1;this.fading=!1;this.fulled=!1;this.hiding=!1;this.imageClicked=!1;this.imageData={};this.index=this.options.initialViewIndex;this.isImg=!1;this.isShown=!1;this.length=0;this.moving=!1;this.played=!1;this.playing=!1;this.pointers={};this.ready=!1;this.rotating=!1;this.scaling=!1;this.showing=!1;this.timeout=!1;this.tooltipping=!1;this.viewed=!1;this.viewing=!1;this.wheeling=!1;this.zooming=!1;this.id=iu();this.init()}var o,v,l;return o=r,l=[{key:"noConflict",value:function(){return window.Viewer=tu,r}},{key:"setDefaults",value:function(n){c(vi,ct(n)&&n)}}],(v=[{key:"init",value:function(){var c,o,l,h,n=this,s=this.element,r=this.options;s[i]||(s[i]=this,r.focus&&!r.keyboard&&(r.focus=!1),c="img"===s.localName,o=[],f(c?[s]:s.querySelectorAll("img"),function(t){u(r.filter)?r.filter.call(n,t)&&o.push(t):n.getImageURL(t)&&o.push(t)}),this.isImg=c,this.length=o.length,this.images=o,this.initBody(),it(document.createElement(i).style.transition)&&(r.transition=!1),r.inline?(l=0,h=function(){var t;(l+=1)===n.length&&(n.initializing=!1,n.delaying={abort:function(){clearTimeout(t)}},t=setTimeout(function(){n.delaying=!1;n.build()},0))},this.initializing={abort:function(){f(o,function(n){n.complete||e(n,a,h)})}},f(o,function(n){n.complete?h():t(n,a,h,{once:!0})})):t(s,tt,this.onStart=function(t){t=t.target;"img"!==t.localName||u(r.filter)&&!r.filter.call(n,t)||n.view(n.images.indexOf(t))}))}},{key:"build",value:function(){var a,r,p,e,l,v,b,d,w,g,nt,rt,o,c;this.ready||(a=this.element,r=this.options,p=a.parentNode,(o=document.createElement("div")).innerHTML='<div class="viewer-container" tabindex="-1" touch-action="none"><div class="viewer-canvas"><\/div><div class="viewer-footer"><div class="viewer-title"><\/div><div class="viewer-toolbar"><\/div><div class="viewer-navbar"><ul class="viewer-list" role="navigation"><\/ul><\/div><\/div><div class="viewer-tooltip" role="alert" aria-hidden="true"><\/div><div class="viewer-button" data-viewer-action="mix" role="button"><\/div><div class="viewer-player"><\/div><\/div>',o=(e=o.querySelector(".".concat(i,"-container"))).querySelector(".".concat(i,"-title")),l=e.querySelector(".".concat(i,"-toolbar")),c=e.querySelector(".".concat(i,"-navbar")),v=e.querySelector(".".concat(i,"-button")),b=e.querySelector(".".concat(i,"-canvas")),this.parent=p,this.viewer=e,this.title=o,this.toolbar=l,this.navbar=c,this.button=v,this.canvas=b,this.footer=e.querySelector(".".concat(i,"-footer")),this.tooltipBox=e.querySelector(".".concat(i,"-tooltip")),this.player=e.querySelector(".".concat(i,"-player")),this.list=e.querySelector(".".concat(i,"-list")),e.id="".concat(i).concat(this.id),o.id="".concat(i,"Title").concat(this.id),n(o,r.title?gt(Array.isArray(r.title)?r.title[0]:r.title):k),n(c,r.navbar?gt(r.navbar):k),lt(v,k,!r.button),r.keyboard&&v.setAttribute("tabindex",0),r.backdrop&&(n(e,"".concat(i,"-backdrop")),r.inline||"static"===r.backdrop||ei(b,wt,"hide")),ht(r.className)&&r.className&&r.className.split(ui).forEach(function(t){n(e,t)}),r.toolbar?(d=document.createElement("ul"),w=ct(r.toolbar),g=bt.slice(0,3),nt=bt.slice(7,9),rt=bt.slice(9),w||n(l,gt(r.toolbar)),f(w?r.toolbar:bt,function(f,e){var s,o=w&&ct(f),e=w?fi(e):f,c=o&&!it(f.show)?f.show:f;c&&(r.zoomable||-1===g.indexOf(e))&&(r.rotatable||-1===nt.indexOf(e))&&(r.scalable||-1===rt.indexOf(e))&&(s=o&&!it(f.size)?f.size:f,o=o&&!it(f.click)?f.click:f,f=document.createElement("li"),r.keyboard&&f.setAttribute("tabindex",0),f.setAttribute("role","button"),n(f,"".concat(i,"-").concat(e)),u(o)||ei(f,wt,e),h(c)&&n(f,gt(c)),-1!==["small","large"].indexOf(s)?n(f,"".concat(i,"-").concat(s)):"play"===e&&n(f,"".concat(i,"-large")),u(o)&&t(f,tt,o),d.appendChild(f))}),l.appendChild(d)):n(l,k),r.rotatable||(n(o=l.querySelectorAll('li[class*="rotate"]'),ot),f(o,function(n){l.appendChild(n)})),r.inline?(n(v,cr),y(e,{zIndex:r.zIndexInline}),"static"===window.getComputedStyle(p).position&&y(p,{position:"relative"}),p.insertBefore(e,a.nextSibling)):(n(v,hr),n(e,ii),n(e,yt),n(e,k),y(e,{zIndex:r.zIndex}),(c=(c=ht(c=r.container)?a.ownerDocument.querySelector(c):c)||this.body).appendChild(e)),r.inline&&(this.render(),this.bind(),this.isShown=!0),this.ready=!0,u(r.ready)&&t(a,ur,r.ready,{once:!0}),!1!==s(a,ur)?this.ready&&r.inline&&this.view(this.index):this.ready=!1)}}])&&ai(o.prototype,v),l&&ai(o,l),Object.defineProperty(o,"prototype",{writable:!1}),r}();return c(l.prototype,b,w,dr,gr,nu),l}),function(n){n.extend({bb_input:function(t,i,r,u,f,e){var o=n(t);o.on("keyup",function(n){r&&n.key==="Enter"?i.invokeMethodAsync(u):f&&n.key==="Escape"&&i.invokeMethodAsync(e,o.val())})},bb_input_selectAll:function(t){var i=n(t);i.on("focus",function(){n(this).select()})}})}(jQuery),function(n){var u=function(t){var i=this;t!==undefined?i.prevValues[t]=n(n(i).find(".ipv4-cell")[t]).val():n(i).find(".ipv4-cell").each(function(t,r){i.prevValues[t]=n(r).val()})},i=function(t){var i=this;t!==undefined?n(n(i).find(".ipv4-cell")[t]).val(i.prevValues[t]):n(i).find(".ipv4-cell").each(function(t,r){n(r).val(i.prevValues)})},t=function(t){var i=this;t===undefined&&t<0&&t>3||n(n(i).find(".ipv4-cell")[t]).focus()},f=function(n){if(typeof n!="string")return!1;var t=n.split(".");return t.length!==4?!1:t.reduce(function(n,t){return n===!1||t.length===0?!1:Number(t)>=0&&Number(t)<=255?!0:!1},!0)},e=function(){var t="";return this.find(".ipv4-cell").each(function(i,r){t+=i==0?n(r).val():"."+n(r).val()}),t},r=function(){var n=this,t,i;if("selectionStart"in n)return n.selectionStart;if(document.selection)return n.focus(),t=document.selection.createRange(),i=document.selection.createRange().text.length,t.moveStart("character",-n.value.length),t.text.length-i;throw new Error("cell is not an input");};n.extend({bb_ipv4_input:function(f){var e=n(f);f.prevValues=[];e.find(".ipv4-cell").focus(function(){n(this).select();e.toggleClass("selected",!0)});e.find(".ipv4-cell").focusout(function(){e.toggleClass("selected",!1)});e.find(".ipv4-cell").each(function(e,o){n(o).keydown(function(i){i.keyCode>=48&&i.keyCode<=57||i.keyCode>=96&&i.keyCode<=105?u.call(f,e):i.keyCode==37||i.keyCode==39?i.keyCode==37&&r.call(o)===0?(t.call(f,e-1),i.preventDefault()):i.keyCode==39&&r.call(o)===n(o).val().length&&(t.call(f,e+1),i.preventDefault()):i.keyCode==9||i.keyCode==8||i.keyCode==46||i.preventDefault()});n(o).keyup(function(r){var u,s,o;(r.keyCode>=48&&r.keyCode<=57||r.keyCode>=96&&r.keyCode<=105)&&(u=n(this).val(),s=Number(u),s>255?i.call(f,e):u.length>1&&u[0]==="0"?i.call(f,e):u.length===3&&t.call(f,e+1));r.key==="Backspace"&&n(this).val()===""&&(n(this).val("0"),o=e-1,o>-1?t.call(f,o):t.call(f,0));r.key==="."&&t.call(f,e+1);r.key==="ArrowRight"&&t.call(f,e+1);r.key==="ArrowLeft"&&t.call(f,e-1)})})}})}(jQuery),function(n){var e=function(t){var i=this;t!==undefined?i.prevValues[t]=n(n(i).find(".ipv4-cell")[t]).val():n(i).find(".ipv4-cell").each(function(t,r){i.prevValues[t]=n(r).val()})},i=function(t){var i=this;t!==undefined?n(n(i).find(".ipv4-cell")[t]).val(i.prevValues[t]):n(i).find(".ipv4-cell").each(function(t,r){n(r).val(i.prevValues)})},t=function(t){var i=this;t===undefined&&t<0&&t>3||n(n(i).find(".ipv4-cell")[t]).focus()},r=function(n){if(typeof n!="string")return!1;var t=n.split(".");return t.length!==4?!1:t.reduce(function(n,t){return n===!1||t.length===0?!1:Number(t)>=0&&Number(t)<=255?!0:!1},!0)},u=function(){var t="";return this.find(".ipv4-cell").each(function(i,r){t+=i==0?n(r).val():"."+n(r).val()}),t},f=function(){var n=this,t,i;if("selectionStart"in n)return n.selectionStart;if(document.selection)return n.focus(),t=document.selection.createRange(),i=document.selection.createRange().text.length,t.moveStart("character",-n.value.length),t.text.length-i;throw new Error("cell is not an input");};n.fn.ipv4_input=function(o,s){var h,c,a,l;if(this.each(function(){if(!n(this).hasClass("ipv4-input")){var r=this;r.prevValues=[];n(r).toggleClass("ipv4-input",!0);n(r).html('<input type="text" class="ipv4-cell" /><label class="ipv4-dot">.<\/label><input type="text" class="ipv4-cell" /><label class="ipv4-dot">.<\/label><input type="text" class="ipv4-cell" /><label class="ipv4-dot">.<\/label><input type="text" class="ipv4-cell" />');n(this).find(".ipv4-cell").focus(function(){n(this).select();n(r).toggleClass("selected",!0)});n(this).find(".ipv4-cell").focusout(function(){n(r).toggleClass("selected",!1)});n(this).find(".ipv4-cell").each(function(u,o){n(o).keydown(function(i){i.keyCode>=48&&i.keyCode<=57||i.keyCode>=96&&i.keyCode<=105?e.call(r,u):i.keyCode==37||i.keyCode==39?i.keyCode==37&&f.call(o)===0?(t.call(r,u-1),i.preventDefault()):i.keyCode==39&&f.call(o)===n(o).val().length&&(t.call(r,u+1),i.preventDefault()):i.keyCode!=9&&i.keyCode!=8&&i.keyCode!=46&&i.preventDefault()});n(o).keyup(function(f){if(f.keyCode>=48&&f.keyCode<=57||f.keyCode>=96&&f.keyCode<=105){var e=n(this).val(),o=Number(e);o>255?i.call(r,u):e.length>1&&e[0]==="0"?i.call(r,u):e.length===3&&t.call(r,u+1)}})})}}),h=function(t,i){if(t=="rwd"&&(i===undefined?this.toggleClass("rwd"):this.toggleClass("rwd",i)),t=="value"){if(i===undefined)return u.call(this);if(!r(i))throw new Error("invalid ip address");var f=i.split(".");this.find(".ipv4-cell").each(function(t,i){n(i).val(f[t])})}return t=="valid"?r(u.call(this)):(t=="clear"&&this.find(".ipv4-cell").each(function(t,i){n(i).val("")}),this)},c=this,n.type(o)==="object"){a=o;for(l in a)h.call(this,l,o[l])}else c=h.call(this,o,s);return c}}(jQuery),function(n){n.extend({bb_layout:function(t,i){if(i==="dispose"){n(window).off("resize");return}var r=function(){var r=n(window).width();t.invokeMethodAsync(i,r)};n(".layout-header").find('[data-bs-toggle="tooltip"]').tooltip();r();n(window).on("resize",function(){r()})}})}(jQuery),function(n){n.extend({bb_side_menu_expand:function(t,i){if(i)n(t).find(".collapse").collapse("show");else{n(t).find(".collapse").collapse("hide");var r=window.setTimeout(function(){window.clearTimeout(r);n.bb_auto_expand(n(t))},400)}},bb_auto_expand:function(t){var u=t.find(".nav-link.expand").map(function(t,i){return n(i).removeClass("expand")}).toArray(),i=t.find(".active"),r;do r=i.parentsUntil(".submenu.collapse").parent(),r.length===1&&r.not(".show")?(i=r.prev(),i.length!==0&&u.push(i)):i=null;while(i!=null&&i.length>0);while(u.length>0)i=u.shift(),i[0].click()},bb_init_side_menu:function(t){var i=t.hasClass("accordion"),r=t.children(".submenu"),u;r.find(".submenu").each(function(){var t=n(this),r,f,e,u;t.addClass("collapse").removeClass("d-none");i?(r=t.parentsUntil(".submenu"),r.prop("nodeName")==="LI"&&(f=r.parent().attr("id"),t.attr("data-bs-parent","#"+f))):t.removeAttr("data-bs-parent");e=t.attr("id");u=t.prev();u.attr("data-bs-toggle","collapse");u.attr("href","#"+e)});i&&(u=r.find(".collapse"),u.each(function(t,r){var u=n(r),f;bootstrap.Collapse.getInstance(r)&&u.collapse("dispose");f="";i&&(f=u.attr("data-bs-parent"));u.collapse({parent:f,toggle:!1})}))},bb_side_menu:function(t){var i=n(t);n.bb_init_side_menu(i);n.bb_auto_expand(i)}});n(function(){n(document).on("click",'.menu a[href="#"]',function(){return!1})})}(jQuery),function(n){n.extend({bb_message:function(t,i,r){window.Messages||(window.Messages=[]);Messages.push(t);var u=n(t),e=u.attr("data-autohide")!=="false",o=parseInt(u.attr("data-delay")),f=null,s=window.setTimeout(function(){window.clearTimeout(s);e&&(f=window.setTimeout(function(){window.clearTimeout(f);u.close()},o));u.addClass("show")},50);u.close=function(){f!=null&&window.clearTimeout(f);u.removeClass("show");var n=window.setTimeout(function(){window.clearTimeout(n);Messages.remove(t);Messages.length===0&&i.invokeMethodAsync(r)},500)};u.on("click",".btn-close",function(n){n.preventDefault();n.stopPropagation();u.close()})}})}(jQuery),function(n){n.extend({bb_modal_dialog:function(t,i,r){var u=n(t);u.data("bb_dotnet_invoker",{obj:i,method:r});var o=0,s=0,e=0,h=0,f={top:0,left:0};u.hasClass("is-draggable")&&(u.find(".btn-maximize").click(function(){var t,i;$button=n(this);t=$button.attr("aria-label");t==="maximize"?u.css({marginLeft:"auto",width:u.width()}):i=window.setInterval(function(){u.attr("style")?u.removeAttr("style"):window.clearInterval(i)},100)}),u.css({marginLeft:"auto"}),u.find(".modal-header").drag(function(n){o=n.clientX||n.touches[0].clientX;s=n.clientY||n.touches[0].clientY;e=u.width();h=u.height();f.top=parseInt(u.css("marginTop").replace("px",""));f.left=parseInt(u.css("marginLeft").replace("px",""));u.css({marginLeft:f.left,marginTop:f.top});u.css("width",e);this.addClass("is-drag")},function(t){var i=t.clientX||t.changedTouches[0].clientX,r=t.clientY||t.changedTouches[0].clientY;newValX=f.left+Math.ceil(i-o);newValY=f.top+Math.ceil(r-s);newValX<=0&&(newValX=0);newValY<=0&&(newValY=0);newValX+e<n(window).width()&&u.css({marginLeft:newValX});newValY+h<n(window).height()&&u.css({marginTop:newValY})},function(){this.removeClass("is-drag")}))},bb_modal:function(t,i){var r=n(t),f,u;if(i==="dispose")r.remove();else if(i==="init"){r.closest(".swal").length===0&&n("body").append(r);r.on("shown.bs.modal",function(){var t=r.attr("data-bs-keyboard")==="true";if(t===!0)n(document).one("keyup",function(n){if(n.key==="Escape"){var i=r.find(".modal-dialog"),t=i.data("bb_dotnet_invoker");t!=null&&t.obj.invokeMethodAsync(t.method)}})})}else i!=="hide"&&i!=="dispose"&&(f=r.attr("data-bs-keyboard")==="true",u=bootstrap.Modal.getInstance(t),u!=null&&(u._config.keyboard=f)),r.modal(i)}})}(jQuery),function(n){n.extend({bb_notify_checkPermission:function(n,t,i){(window.Notification||navigator.mozNotification)&&window.FileReader&&window.history.pushState?Notification.permission==="granted"?n!==null&&t!==""&&n.invokeMethodAsync(t,!0):i&&(Notification.permission!=="denied"||Notification.permission==="default")&&Notification.requestPermission(function(i){var r=i==="granted";n!==null&&t!==""&&n.invokeMethodAsync(t,r)}):(console.warn("Your browser does not support all features of this API"),n!==null&&t!==""&&n.invokeMethodAsync(t,!1))},bb_notify_display:function(t,i,r){var f=!1,e,u,o;return n.bb_notify_checkPermission(null,null,!0),r.title!==null&&(e=r.onClick,u={},r.message!==null&&(u.body=r.message.substr(0,250)),r.icon!==null&&(u.icon=r.icon),r.silent!==null&&(u.silent=r.silent),r.sound!==null&&(u.sound=r.sound),o=new Notification(r.title.substr(0,100),u),t!==null&&e!==null&&(o.onclick=function(n){n.preventDefault();t.invokeMethodAsync(e)}),f=!0),t!==null&&i!==null&&t.invokeMethodAsync(i,f),f}})}(jQuery),function(n){n.extend({bb_confirm:function(t){var f=n('[data-bs-target="'+t+'"]'),r="is-show",i=document.getElementById(t),u=bootstrap.Popover.getOrCreateInstance(i,{toggle:"confirm",html:!0,sanitize:!1,content:f.find(".popover-body").html()});i.classList.contains(r)===!1?(u.show(),i.classList.add(r)):(u.hide(),i.classList.remove(r))},bb_confirm_submit:function(t){var r=n("#"+t),i=n('<button type="submit" hidden />');i.appendTo(r.parent());i.trigger("click");i.remove()},bb_popover:function(t,i,r,u,f,e,o){var s=document.getElementById(t),h=bootstrap.Popover.getInstance(s),c;h&&h.dispose();i!=="dispose"&&(c={html:e,sanitize:!1,title:r,content:u,placement:f,trigger:o},h=new bootstrap.Popover(s,c),i!==""&&n(s).popover(i))},bb_datetimePicker:function(t,i){var r=n(t),f=r.attr("data-bs-placement")||"auto",u=r.find(".datetime-picker-input");if(i)u.popover(i);else{u.popover({toggle:"datetime-picker",placement:f}).on("show.bs.popover",function(){var t=n(this).parent().hasClass("disabled");return!t}).on("inserted.bs.popover",function(){var u=this.getAttribute("aria-describedby"),i,t;u&&(i=n("#"+u),t=i.find(".popover-body"),t.length===0&&(t=n('<div class="popover-body"><\/div>').appendTo(i)),t.append(r.find(".date-picker").removeClass("d-none")))}).on("hide.bs.popover",function(){var t=this.getAttribute("aria-describedby"),i,u;t&&(i=n("#"+t),u=i.find(".date-picker"),r.append(u.addClass("d-none")))});r.find(".datetime-picker-input-icon").on("click",function(t){if(!n(this).hasClass("disabled")){t.stopImmediatePropagation();var i=n(this).parents(".datetime-picker-bar").find(".datetime-picker-input");i.trigger("click")}});r.find(".date-table .cell").on("click",function(t){n(t.target).parent().parent().hasClass("disabled")&&(t.preventDefault(),t.stopImmediatePropagation())})}},bb_datetimeRange:function(t,i){var r=n(t),f=r.attr("data-bs-placement")||"auto",u=r.find(".datetime-range-bar");if(i)u.popover(i);else{u.popover({toggle:"datetime-range",placement:f}).on("show.bs.popover",function(){var t=n(this).parent().hasClass("disabled");return!t}).on("inserted.bs.popover",function(){var u=this.getAttribute("aria-describedby"),i,t;u&&(i=n("#"+u),t=i.find(".popover-body"),t.length===0&&(t=n('<div class="popover-body"><\/div>').appendTo(i)),t.append(r.find(".datetime-range-body").removeClass("d-none")))}).on("hide.bs.popover",function(){var t=this.getAttribute("aria-describedby"),i,u;t&&(i=n("#"+t),u=i.find(".datetime-range-body"),r.append(u.addClass("d-none")))});r.find(".is-clear").on("click",function(){u.popover("hide")})}}});n(function(){var r,t,i;n.fn.popover.Constructor.prototype.isWithContent=function(){var n=this._config.toggle;return["","confirm","datetime-picker","datetime-range"].indexOf(n)||this.getTitle()||this._getContent()};r=n.fn.popover.Constructor.prototype.getTipElement;n.fn.popover.Constructor.prototype.getTipElement=function(){var i=this._config.toggle,u=r.call(this),t=n(u).addClass("shadow");return t.find(".popover-header").length>0&&t.addClass("has-header"),i==="datetime-picker"&&t.addClass("popover-datetime"),i==="datetime-range"&&t.addClass("popover-datetime-range"),u};t=function(t){var i=null,r=t.parents(".popover"),u;return r.length>0&&(u=r.attr("id"),i=n('[aria-describedby="'+u+'"]')),i};i=function(n){n.popover("dispose");n.removeClass("is-show")};n(document).on("click",function(r){var e=!0,u=n(r.target),o=t(u),f;o!=null&&(e=!1);e&&(f=u,f.data("bs-toggle")!=="confirm"&&(f=f.parents('[data-bs-toggle="confirm"][aria-describedby^="popover"]')),n('[data-bs-toggle="confirm"][aria-describedby^="popover"]').each(function(t,r){if(f[0]!==r){var u=n(r);i(u)}}));u.parents(".popover-datetime.show").length===0&&n(".popover-datetime.show").each(function(){var t=this.getAttribute("id"),i;t&&(i=n('[aria-describedby="'+t+'"]'),u.attr("aria-describedby")!==t&&i.popover("hide"))});u.parents(".popover-datetime-range.show").length===0&&n(".popover-datetime-range.show").each(function(){var t=this.getAttribute("id"),i;t&&(i=n('[aria-describedby="'+t+'"]'),u.parents(".datetime-range-bar").attr("aria-describedby")!==t&&i.popover("hide"))})});n(document).on("click",".popover-confirm-buttons .btn",function(r){var u,f,e;r.stopPropagation();u=t(n(this));u.length>0&&(i(u),f=u.attr("id"),$ele=n('[data-bs-target="'+f+'"]'),e=this.getAttribute("data-dismiss")==="confirm"?$ele.find(".popover-confirm-buttons .btn:first"):$ele.find(".popover-confirm-buttons .btn:last"),e.trigger("click"))})})}(jQuery),function(n){n.extend({bb_printview:function(t){var r=n(t).parent(),f=r.hasClass("modal-header"),e=r.hasClass("modal-footer"),i=null;if(f?i=r.next():e&&(i=r.parentsUntil(".modal-content").parent().find(".modal-body")),i!=null&&i.length>0){var o=i.html(),u=n("body").addClass("bb-printview-open"),s=n("<div><\/div>").addClass("bb-printview").html(o).appendTo(u);window.print();u.removeClass("bb-printview-open");s.remove()}else window.print()}})}(jQuery),function(n){n.extend({bb_qrcode:function(t,i,r,u){var e=n(t),f=e.find(".qrcode-img");f.html("");r==="generate"&&(qrcode=new QRCode(f[0],{text:u,width:128,height:128,colorDark:"#000000",colorLight:"#ffffff",correctLevel:QRCode.CorrectLevel.H}),i.invokeMethodAsync("Generated"))}})}(jQuery),function(n){n.extend({bb_rate:function(t,i,r){var u=n(t),f;u.val=parseInt(u.attr("aria-valuenow"));f=function(){var t=u.find(".rate-item");t.each(function(t){t>u.val?n(this).removeClass("is-on"):n(this).addClass("is-on")})};u.on("mouseenter",".rate-item",function(){if(!u.hasClass("disabled")){var t=u.find(".rate-item"),i=t.toArray().indexOf(this);t.each(function(t){t>i?n(this).removeClass("is-on"):n(this).addClass("is-on")})}});u.on("mouseleave",function(){u.hasClass("disabled")||f()});u.on("click",".rate-item",function(){if(!u.hasClass("disabled")){var n=u.find(".rate-item");u.val=n.toArray().indexOf(this);u.attr("aria-valuenow",u.val+1);i.invokeMethodAsync(r,u.val+1)}})}})}(jQuery),function(n){n.extend({bb_row:function(t){var i=n(t);i.grid()}})}(jQuery),function(n){n.extend({bb_multi_select:function(t,i,r){n(t).data("bb_multi_select",{obj:i,method:r})}});n(function(){n(document).on("click",function(t){var r=n(t.target),i=r.closest(".multi-select");n(".multi-select.show").each(function(){if(i.length===0||this!=i[0]){var t=n(this).data("bb_multi_select");t.obj.invokeMethodAsync(t.method)}})})})}(jQuery),function(n){n.extend({bb_select:function(t,i,r){var u=n(t),e=u.find("input.search-text"),f=function(n){var i=n.find(".dropdown-menu"),t=i.children(".preActive");if(t.length===0&&(t=i.children(".active"),t.addClass("preActive")),t.length===1){var u=i.innerHeight(),f=t.outerHeight(),e=t.index()+1,r=11+f*e-u;r>=0?i.scrollTop(r):i.scrollTop(0)}};u.on("show.bs.dropdown",function(n){u.find(".form-select").prop("disabled")&&n.preventDefault()});u.on("shown.bs.dropdown",function(){e.length>0&&e.focus();f(n(this))});u.on("keyup",function(t){var u=n(this),o,e,s,h,c;u.find(".dropdown-toggle").hasClass("show")&&(o=u.find(".dropdown-menu.show > .dropdown-item").not(".disabled, .search"),e=o.filter(function(t,i){return n(i).hasClass("preActive")}),o.length>1&&(t.key==="ArrowUp"?(e.removeClass("preActive"),s=e.prev().not(".disabled, .search"),s.length===0&&(s=o.last()),s.addClass("preActive"),f(u)):t.key==="ArrowDown"&&(e.removeClass("preActive"),h=e.next().not(".disabled, .search"),h.length===0&&(h=o.first()),h.addClass("preActive"),f(u))),t.key==="Enter"&&(u.find(".show").removeClass("show"),c=e.index(),u.find(".search").length>0&&c--,i.invokeMethodAsync(r,c)))});u.on("click",".dropdown-item.disabled",function(n){n.stopImmediatePropagation()})}})}(jQuery),function(n){n.extend({bb_slider:function(t,i,r){var f=n(t),s=f.find(".disabled").length>0;if(!s){var e=0,o=0,u=0,h=f.innerWidth();f.find(".slider-button-wrapper").drag(function(n){e=n.clientX||n.touches[0].clientX;o=parseInt(f.attr("aria-valuetext"));f.find(".slider-button-wrapper, .slider-button").addClass("dragging")},function(n){var t=n.clientX||n.changedTouches[0].clientX;u=Math.ceil((t-e)*100/h)+o;u<=0&&(u=0);u>=100&&(u=100);f.find(".slider-bar").css({width:u.toString()+"%"});f.find(".slider-button-wrapper").css({left:u.toString()+"%"});f.attr("aria-valuetext",u.toString());i.invokeMethodAsync(r,u)},function(){f.find(".slider-button-wrapper, .slider-button").removeClass("dragging");i.invokeMethodAsync(r,u)})}}})}(jQuery),function(n){n.extend({bb_split:function(t){var i=n(t),f=i.innerWidth(),e=i.innerHeight(),u=0,r=0,o=0,s=0,h=!i.children().hasClass("is-horizontal");i.children().children(".split-bar").drag(function(n){f=i.innerWidth();e=i.innerHeight();h?(s=n.clientY||n.touches[0].clientY,u=i.children().children(".split-left").innerHeight()*100/e):(o=n.clientX||n.touches[0].clientX,u=i.children().children(".split-left").innerWidth()*100/f);i.toggleClass("dragging")},function(n){var t,c;h?(t=n.clientY||n.changedTouches[0].clientY,r=Math.ceil((t-s)*100/e)+u):(c=n.clientX||n.changedTouches[0].clientX,r=Math.ceil((c-o)*100/f)+u);r<=0&&(r=0);r>=100&&(r=100);i.children().children(".split-left").css({"flex-basis":r.toString()+"%"});i.children().children(".split-right").css({"flex-basis":(100-r).toString()+"%"});i.attr("data-split",r)},function(){i.toggleClass("dragging")})}})}(jQuery),function(n){n.extend({bb_tab:function(t){var i=n(t),r=window.setInterval(function(){i.is(":visible")&&(window.clearInterval(r),i.lgbTab("active"))},200)}})}(jQuery),function(n){n.extend({bb_table_search:function(t,i,r,u){n(t).data("bb_table_search",{obj:i,searchMethod:r,clearSearchMethod:u})},bb_table_row_hover:function(t){var i=t.find(".table-excel-toolbar"),r=t.find("tbody > tr").each(function(t,r){n(r).hover(function(){var t=n(this).position().top;i.css({top:t+"px",display:"block"})},function(){i.css({top:top+"px",display:"none"})})})},bb_table_resize:function(t){var f=t.find(".col-resizer");if(f.length>0){var e=function(t){var u=n(this),i=u.closest("th");t?i.addClass("border-resize"):i.removeClass("border-resize");var r=i.index(),f=i.closest(".table-resize").find("tbody"),e=f.find("tr").each(function(){var i=n(this.children[r]);t?i.addClass("border-resize"):i.removeClass("border-resize")});return r},i=0,r=0,u=0,o=0;f.each(function(){n(this).drag(function(f){u=e.call(this,!0);var s=t.find("table colgroup col")[u].width;i=s?parseInt(s):n(this).closest("th").width();r=n(this).closest("table").width();o=f.clientX},function(f){t.find("table colgroup").each(function(t,e){var c=n(e).find("col")[u],h=f.clientX-o,s;c.width=i+h;s=n(e).closest("table");s.parent().hasClass("table-fixed-header")?s.width(r+h):s.width(r+h-6)})},function(){e.call(this,!1)})})}},bb_table_load:function(t,i){var u=n(t),r=u.find(".table-loader");i==="show"?r.addClass("show"):r.removeClass("show")},bb_table_filter_calc:function(t){var c=t.find(".table-toolbar"),l=0,h,e,u;c.length>0&&(l=c.outerHeight());var o=n(this),a=o.position(),v=o.attr("data-field"),f=t.find('.table-filter-item[data-field="'+v+'"]'),i=o.closest("th"),y=i.closest("thead"),p=y.outerHeight()-i.outerHeight(),s=i.outerWidth()+i.position().left-f.outerWidth()/2,r=0,w=i.hasClass("fixed");i.hasClass("sortable")&&(r=24);i.hasClass("filterable")&&(r=r+12);h=0;w||(h=i.closest("table").parent().scrollLeft());e=i.offset().left+i.outerWidth()-r+f.outerWidth()/2-n(window).width();r=r+h;e>0&&(s=s-e-16,$arrow=f.find(".card-arrow"),$arrow.css({left:"calc(50% - 0.5rem + "+(e+16)+"px)"}));u=t.find(".table-search").outerHeight();u===undefined?u=0:u+=8;f.css({top:a.top+l+p+u+50,left:s-r})},bb_table_filter:function(t){t.on("click",".filterable .fa-filter",function(){n.bb_table_filter_calc.call(this,t)})},bb_table_getCaretPosition:function(n){var t=-1,i=n.selectionStart,r=n.selectionEnd;return i==r&&(i==n.value.length?t=1:i==0&&(t=0)),t},bb_table_excel_keybord:function(t){var f=t.find(".table-excel").length>0;if(f){var i={TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40},e=function(n){var t=window.setTimeout(function(){window.clearTimeout(t);n.focus();n.select()},10)},r=function(t,i){var r=!1,f=t[i],u=n(f).find("input.form-control:not([readonly]");return u.length>0&&(e(u),r=!0),r},u=function(n,t){var o=n.closest("td"),e=o.closest("tr"),u=e.children("td"),f=u.index(o);if(t==i.LEFT_ARROW){while(f-->0)if(r(u,f))break}else if(t==i.RIGHT_ARROW){while(f++<u.length)if(r(u,f))break}else if(t==i.UP_ARROW){for(u=e.prev().children("td");f<u.length;)if(r(u,f))break}else if(t==i.DOWN_ARROW)for(u=e.next().children("td");f<u.length;)if(r(u,f))break};t.on("keydown",function(t){var r=n(t.target);switch(t.keyCode){case i.UP_ARROW:case i.LEFT_ARROW:n.bb_table_getCaretPosition(t.target)==0&&u(r,t.keyCode);break;case i.DOWN_ARROW:case i.RIGHT_ARROW:n.bb_table_getCaretPosition(t.target)==1&&u(r,t.keyCode)}})}},bb_table_width:function(t,i){var r=n(t);return i?r.outerWidth(!0):n(window).outerWidth(!0)},bb_table_tooltip:function(t){var i=n(t);i.find(".is-tips").tooltip({container:"body",title:function(){return n(this).text()}})},bb_table_fixedbody:function(t,i,r){var u,f,s,e,h,o;i||(i=t.find(".table-fixed-body"));r||(r=t.find(".table-fixed-header"));u=t.find(".table-search:first").outerHeight();u||(u=0);f=t.find(".table-pagination:first").outerHeight();f||(f=0);s=t.find(".table-toolbar:first").outerHeight();e=f+s+u;e>0&&(u>0&&(h=i.parent().css("height"),t.find(".table-search-collapse").each(function(){n(this).data("fixed-height",h)})),i.parent().css({height:"calc(100% - "+e+"px)"}));o=r.outerHeight();o>0&&i.css({height:"calc(100% - "+o+"px)"})},bb_table:function(t,i,r,u){var f=n(t),l=f.find(".table-fixed").length>0,a,h,c,e,o,v,s;if(l){a=f.find(".table-fixed-header");h=f.find(".table-fixed-body");h.on("scroll",function(){var n=h.scrollLeft();a.scrollLeft(n)});if(c=f.find(".fixed-scroll"),c.length===1){for(e=c.prev();e.length===1;)if(e.hasClass("fixed-right")&&!e.hasClass("modified"))o=e.css("right"),o=o.replace("px",""),n.browser.versions.mobile&&(o=parseFloat(o)-6+"px"),e.css({right:o}).addClass("modified"),e=e.prev();else break;n.browser.versions.mobile&&c.remove()}n.bb_table_fixedbody(f,h,a);f.find(".col-resizer:last").remove()}v=f.find(".table-cell.is-sort .table-text");s=u;v.each(function(){var i=n(this).parent().find(".fa:last"),t;i.length>0&&(t=s.unset,i.hasClass("fa-sort-asc")?t=s.sortAsc:i.hasClass("fa-sort-desc")&&(t=s.sortDesc),n(this).tooltip({container:"body",title:t}))});v.on("click",function(){var i=n(this),u=i.parent().find(".fa:last"),t="sortAsc",r,f;u.hasClass("fa-sort-asc")?t="sortDesc":u.hasClass("fa-sort-desc")&&(t="unset");r=n("#"+i.attr("aria-describedby"));r.length>0&&(f=r.find(".tooltip-inner"),f.html(s[t]),i.attr("data-original-title",s[t]))});f.children(".table-scroll").scroll(function(){f.find(".table-filter-item.show").each(function(){var t=n(this).attr("data-field"),i=f.find('.fa-filter[data-field="'+t+'"]')[0];n.bb_table_filter_calc.call(i,f)})});n.bb_table_row_hover(f);n.bb_table_tooltip(t);n.bb_table_filter(f);n.bb_table_resize(f);n.bb_table_excel_keybord(f);f.on("click",".table-search-collapse",function(){var i=n(this).toggleClass("is-open"),t=i.closest(".card").find(".card-body");t.length===1&&(t.is(":hidden")&&(l&&f.find(".table-fixed-body").parent().css({height:i.data("fixed-height")}),t.parent().toggleClass("collapsed")),t.slideToggle("fade",function(){var t=n(this);t.is(":hidden")&&t.parent().toggleClass("collapsed");l&&n.bb_table_fixedbody(f)}))})}});n(function(){n(document).on("keyup",function(t){var r,i;t.key==="Enter"?(r=n(t.target).closest(".table-container"),i=r.data("bb_table_search"),i&&i.obj.invokeMethodAsync(i.searchMethod)):t.key==="Escape"&&(r=n(t.target).closest(".table-container"),i=r.data("bb_table_search"),i&&i.obj.invokeMethodAsync(i.clearSearchMethod))});n(document).on("click",function(t){var i=n(t.target),u=i.closest(".dropdown-menu.show"),r;u.length>0||(r=i.closest(".btn-col"),r.length>0)||n(".table-toolbar > .btn-group > .btn-col > .dropdown-toggle.show").each(function(t,i){n(i).trigger("click")})})})}(jQuery),function(n){n.extend({bb_setTitle:function(n){document.title=n}})}(jQuery),function(n){n.extend({bb_toast_close:function(t){var i=n(t);i.find(".btn-close").trigger("click")},bb_toast:function(t,i,r){var f,o;window.Toasts===undefined&&(window.Toasts=[]);Toasts.push(t);var u=n(t),s=u.attr("data-bs-autohide")!=="false",e=parseInt(u.attr("data-bs-delay"));u.addClass("d-block");f=null;o=window.setTimeout(function(){window.clearTimeout(o);s&&(u.find(".toast-progress").css({width:"100%",transition:"width "+e/1e3+"s linear"}),f=window.setTimeout(function(){window.clearTimeout(f);u.find(".btn-close").trigger("click")},e));u.addClass("show")},50);u.on("click",".btn-close",function(n){n.preventDefault();n.stopPropagation();f!=null&&window.clearTimeout(f);u.removeClass("show");var t=window.setTimeout(function(){window.clearTimeout(t);u.removeClass("d-block");Toasts.remove(u[0]);Toasts.length===0&&i.invokeMethodAsync(r)},500)})}})}(jQuery),function(n){n.extend({bb_tooltip:function(t,i,r,u,f,e){var s=document.getElementById(t),h,l,c,o;s!==null&&(h=bootstrap.Tooltip.getInstance(s),h&&h.dispose(),i!=="dispose"&&(l={html:f,sanitize:!f,title:r,placement:u,trigger:e},h=new bootstrap.Tooltip(s,l),c=n(s),i==="enable"?(o=c.parents("form").find(".is-invalid:first"),o.prop("nodeName")==="INPUT"?o.prop("readonly")?o.trigger("focus"):o.focus():o.prop("nodeName")==="DIV"&&o.trigger("focus")):i!==""&&c.tooltip(i)))}});n(function(){n(document).on("inserted.bs.tooltip",".is-invalid",function(){n("#"+n(this).attr("aria-describedby")).addClass("is-invalid")})})}(jQuery),function(n){n.extend({bb_transition:function(t,i,r){n(t).on("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oAnimationEnd",function(){i.invokeMethodAsync(r)})}})}(jQuery),function(n){n.extend({bb_tree:function(t){var i=n(t);i.find(".tree-content").hover(function(){n(this).parent().addClass("hover")},function(){n(this).parent().removeClass("hover")});i.on("click",".tree-node",function(){var i=n(this),r=i.prev(),t=r.find('[type="radio"]');t.attr("disabeld")!=="disabled"&&t.trigger("click")})}})}(jQuery),function(n){n.extend({bb_upload:function(t){var i=n(t);i.on("click",".btn-browser",function(){var r=n(this),t=i.find(":file");t.trigger("click")})}})}(jQuery),function(n){n.extend({bb_form:function(t){var i=n("#"+t);i.find("[aria-describedby]").each(function(t,i){var u=bootstrap.Tooltip.getInstance(i),r;u&&(r=n(i),r.tooltip("dispose"))})}})}(jQuery);